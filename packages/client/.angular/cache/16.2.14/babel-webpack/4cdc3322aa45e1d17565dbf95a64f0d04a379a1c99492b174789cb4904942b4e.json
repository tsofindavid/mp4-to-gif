{"ast":null,"code":"/** @enum {String} */\nexport const EVENT_TYPES = {\n  UPLOAD_START: 'UPLOAD_START',\n  REMOVE: 'REMOVE',\n  UPLOAD_PROGRESS: 'UPLOAD_PROGRESS',\n  UPLOAD_FINISH: 'UPLOAD_FINISH',\n  UPLOAD_ERROR: 'UPLOAD_ERROR',\n  VALIDATION_ERROR: 'VALIDATION_ERROR',\n  CDN_MODIFICATION: 'CLOUD_MODIFICATION',\n  DATA_OUTPUT: 'DATA_OUTPUT',\n  DONE_FLOW: 'DONE_FLOW',\n  INIT_FLOW: 'INIT_FLOW'\n};\nexport class EventData {\n  /**\n   * @param {Object} src\n   * @param {EVENT_TYPES} src.type\n   * @param {String} src.ctx\n   * @param {any} [src.data]\n   */\n  constructor(src) {\n    /** @type {String} */\n    this.ctx = src.ctx;\n    /** @type {EVENT_TYPES} */\n    this.type = src.type;\n    this.data = src.data;\n  }\n}\nexport class EventManager {\n  /** @param {EVENT_TYPES} type */\n  static eName(type) {\n    return 'LR_' + type;\n  }\n\n  /** @private */\n  static _timeoutStore = Object.create(null);\n\n  /**\n   * @param {EventData} eData\n   * @param {import('./UploaderBlock.js').UploaderBlock | Window} [el]\n   * @param {Boolean} [debounce]\n   */\n  static emit(eData, el = window, debounce = true) {\n    let dispatch = () => {\n      el.dispatchEvent(new CustomEvent(this.eName(eData.type), {\n        detail: eData\n      }));\n    };\n    if (!debounce) {\n      dispatch();\n      return;\n    }\n    let timeoutKey = eData.type + eData.ctx;\n    if (this._timeoutStore[timeoutKey]) {\n      window.clearTimeout(this._timeoutStore[timeoutKey]);\n    }\n    this._timeoutStore[timeoutKey] = window.setTimeout(() => {\n      dispatch();\n      delete this._timeoutStore[timeoutKey];\n    }, 20);\n  }\n}","map":{"version":3,"names":["EVENT_TYPES","UPLOAD_START","REMOVE","UPLOAD_PROGRESS","UPLOAD_FINISH","UPLOAD_ERROR","VALIDATION_ERROR","CDN_MODIFICATION","DATA_OUTPUT","DONE_FLOW","INIT_FLOW","EventData","constructor","src","ctx","type","data","EventManager","eName","_timeoutStore","Object","create","emit","eData","el","window","debounce","dispatch","dispatchEvent","CustomEvent","detail","timeoutKey","clearTimeout","setTimeout"],"sources":["/Users/David/Documents/own_projects/mp4-to-gif/node_modules/@uploadcare/blocks/abstract/EventManager.js"],"sourcesContent":["/** @enum {String} */\nexport const EVENT_TYPES = {\n  UPLOAD_START: 'UPLOAD_START',\n  REMOVE: 'REMOVE',\n  UPLOAD_PROGRESS: 'UPLOAD_PROGRESS',\n  UPLOAD_FINISH: 'UPLOAD_FINISH',\n  UPLOAD_ERROR: 'UPLOAD_ERROR',\n  VALIDATION_ERROR: 'VALIDATION_ERROR',\n  CDN_MODIFICATION: 'CLOUD_MODIFICATION',\n  DATA_OUTPUT: 'DATA_OUTPUT',\n  DONE_FLOW: 'DONE_FLOW',\n  INIT_FLOW: 'INIT_FLOW',\n};\n\nexport class EventData {\n  /**\n   * @param {Object} src\n   * @param {EVENT_TYPES} src.type\n   * @param {String} src.ctx\n   * @param {any} [src.data]\n   */\n  constructor(src) {\n    /** @type {String} */\n    this.ctx = src.ctx;\n    /** @type {EVENT_TYPES} */\n    this.type = src.type;\n    this.data = src.data;\n  }\n}\n\nexport class EventManager {\n  /** @param {EVENT_TYPES} type */\n  static eName(type) {\n    return 'LR_' + type;\n  }\n\n  /** @private */\n  static _timeoutStore = Object.create(null);\n\n  /**\n   * @param {EventData} eData\n   * @param {import('./UploaderBlock.js').UploaderBlock | Window} [el]\n   * @param {Boolean} [debounce]\n   */\n  static emit(eData, el = window, debounce = true) {\n    let dispatch = () => {\n      el.dispatchEvent(\n        new CustomEvent(this.eName(eData.type), {\n          detail: eData,\n        })\n      );\n    };\n    if (!debounce) {\n      dispatch();\n      return;\n    }\n    let timeoutKey = eData.type + eData.ctx;\n    if (this._timeoutStore[timeoutKey]) {\n      window.clearTimeout(this._timeoutStore[timeoutKey]);\n    }\n    this._timeoutStore[timeoutKey] = window.setTimeout(() => {\n      dispatch();\n      delete this._timeoutStore[timeoutKey];\n    }, 20);\n  }\n}\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,WAAW,GAAG;EACzBC,YAAY,EAAE,cAAc;EAC5BC,MAAM,EAAE,QAAQ;EAChBC,eAAe,EAAE,iBAAiB;EAClCC,aAAa,EAAE,eAAe;EAC9BC,YAAY,EAAE,cAAc;EAC5BC,gBAAgB,EAAE,kBAAkB;EACpCC,gBAAgB,EAAE,oBAAoB;EACtCC,WAAW,EAAE,aAAa;EAC1BC,SAAS,EAAE,WAAW;EACtBC,SAAS,EAAE;AACb,CAAC;AAED,OAAO,MAAMC,SAAS,CAAC;EACrB;AACF;AACA;AACA;AACA;AACA;EACEC,WAAWA,CAACC,GAAG,EAAE;IACf;IACA,IAAI,CAACC,GAAG,GAAGD,GAAG,CAACC,GAAG;IAClB;IACA,IAAI,CAACC,IAAI,GAAGF,GAAG,CAACE,IAAI;IACpB,IAAI,CAACC,IAAI,GAAGH,GAAG,CAACG,IAAI;EACtB;AACF;AAEA,OAAO,MAAMC,YAAY,CAAC;EACxB;EACA,OAAOC,KAAKA,CAACH,IAAI,EAAE;IACjB,OAAO,KAAK,GAAGA,IAAI;EACrB;;EAEA;EACA,OAAOI,aAAa,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;;EAE1C;AACF;AACA;AACA;AACA;EACE,OAAOC,IAAIA,CAACC,KAAK,EAAEC,EAAE,GAAGC,MAAM,EAAEC,QAAQ,GAAG,IAAI,EAAE;IAC/C,IAAIC,QAAQ,GAAGA,CAAA,KAAM;MACnBH,EAAE,CAACI,aAAa,CACd,IAAIC,WAAW,CAAC,IAAI,CAACX,KAAK,CAACK,KAAK,CAACR,IAAI,CAAC,EAAE;QACtCe,MAAM,EAAEP;MACV,CAAC,CACH,CAAC;IACH,CAAC;IACD,IAAI,CAACG,QAAQ,EAAE;MACbC,QAAQ,CAAC,CAAC;MACV;IACF;IACA,IAAII,UAAU,GAAGR,KAAK,CAACR,IAAI,GAAGQ,KAAK,CAACT,GAAG;IACvC,IAAI,IAAI,CAACK,aAAa,CAACY,UAAU,CAAC,EAAE;MAClCN,MAAM,CAACO,YAAY,CAAC,IAAI,CAACb,aAAa,CAACY,UAAU,CAAC,CAAC;IACrD;IACA,IAAI,CAACZ,aAAa,CAACY,UAAU,CAAC,GAAGN,MAAM,CAACQ,UAAU,CAAC,MAAM;MACvDN,QAAQ,CAAC,CAAC;MACV,OAAO,IAAI,CAACR,aAAa,CAACY,UAAU,CAAC;IACvC,CAAC,EAAE,EAAE,CAAC;EACR;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}