{"ast":null,"code":"let cbMapping = {};\nwindow.addEventListener('message', e => {\n  let message;\n  try {\n    message = JSON.parse(e.data);\n  } catch (err) {\n    return;\n  }\n  if (message?.type in cbMapping) {\n    let cbList = cbMapping[message.type];\n    for (let [sender, callback] of cbList) {\n      if (e.source === sender) {\n        callback(message);\n      }\n    }\n  }\n});\nconst registerMessage = function (type, sender, callback) {\n  if (!(type in cbMapping)) {\n    cbMapping[type] = [];\n  }\n  cbMapping[type].push([sender, callback]);\n};\nconst unregisterMessage = function (type, sender) {\n  if (type in cbMapping) {\n    cbMapping[type] = cbMapping[type].filter(item => item[0] !== sender);\n  }\n};\nexport { registerMessage, unregisterMessage };","map":{"version":3,"names":["cbMapping","window","addEventListener","e","message","JSON","parse","data","err","type","cbList","sender","callback","source","registerMessage","push","unregisterMessage","filter","item"],"sources":["/Users/David/Documents/own_projects/mp4-to-gif/node_modules/@uploadcare/blocks/blocks/ExternalSource/messages.js"],"sourcesContent":["let cbMapping = {};\n\nwindow.addEventListener('message', (e) => {\n  let message;\n  try {\n    message = JSON.parse(e.data);\n  } catch (err) {\n    return;\n  }\n\n  if (message?.type in cbMapping) {\n    let cbList = cbMapping[message.type];\n    for (let [sender, callback] of cbList) {\n      if (e.source === sender) {\n        callback(message);\n      }\n    }\n  }\n});\n\nconst registerMessage = function (type, sender, callback) {\n  if (!(type in cbMapping)) {\n    cbMapping[type] = [];\n  }\n\n  cbMapping[type].push([sender, callback]);\n};\n\nconst unregisterMessage = function (type, sender) {\n  if (type in cbMapping) {\n    cbMapping[type] = cbMapping[type].filter((item) => item[0] !== sender);\n  }\n};\n\nexport { registerMessage, unregisterMessage };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAG,CAAC,CAAC;AAElBC,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAGC,CAAC,IAAK;EACxC,IAAIC,OAAO;EACX,IAAI;IACFA,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACH,CAAC,CAACI,IAAI,CAAC;EAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZ;EACF;EAEA,IAAIJ,OAAO,EAAEK,IAAI,IAAIT,SAAS,EAAE;IAC9B,IAAIU,MAAM,GAAGV,SAAS,CAACI,OAAO,CAACK,IAAI,CAAC;IACpC,KAAK,IAAI,CAACE,MAAM,EAAEC,QAAQ,CAAC,IAAIF,MAAM,EAAE;MACrC,IAAIP,CAAC,CAACU,MAAM,KAAKF,MAAM,EAAE;QACvBC,QAAQ,CAACR,OAAO,CAAC;MACnB;IACF;EACF;AACF,CAAC,CAAC;AAEF,MAAMU,eAAe,GAAG,SAAAA,CAAUL,IAAI,EAAEE,MAAM,EAAEC,QAAQ,EAAE;EACxD,IAAI,EAAEH,IAAI,IAAIT,SAAS,CAAC,EAAE;IACxBA,SAAS,CAACS,IAAI,CAAC,GAAG,EAAE;EACtB;EAEAT,SAAS,CAACS,IAAI,CAAC,CAACM,IAAI,CAAC,CAACJ,MAAM,EAAEC,QAAQ,CAAC,CAAC;AAC1C,CAAC;AAED,MAAMI,iBAAiB,GAAG,SAAAA,CAAUP,IAAI,EAAEE,MAAM,EAAE;EAChD,IAAIF,IAAI,IAAIT,SAAS,EAAE;IACrBA,SAAS,CAACS,IAAI,CAAC,GAAGT,SAAS,CAACS,IAAI,CAAC,CAACQ,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAAC,CAAC,CAAC,KAAKP,MAAM,CAAC;EACxE;AACF,CAAC;AAED,SAASG,eAAe,EAAEE,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}