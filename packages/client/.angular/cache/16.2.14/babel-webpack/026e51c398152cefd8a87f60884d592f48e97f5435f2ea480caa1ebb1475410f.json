{"ast":null,"code":"import { Block } from '../../../abstract/Block.js';\nimport { COLOR_OPERATIONS_CONFIG } from './toolbar-constants.js';\nconst ControlType = {\n  FILTER: 'filter',\n  COLOR_OPERATION: 'color_operation'\n};\nexport const FAKE_ORIGINAL_FILTER = 'original';\nexport class EditorSlider extends Block {\n  init$ = {\n    ...this.init$,\n    disabled: false,\n    min: 0,\n    max: 100,\n    value: 0,\n    defaultValue: 0,\n    zero: 0,\n    'on.input': value => {\n      this.$['*faderEl'].set(value);\n      this.$.value = value;\n    }\n  };\n\n  /**\n   * @param {String} operation\n   * @param {String} [filter]\n   */\n  setOperation(operation, filter) {\n    this._controlType = operation === 'filter' ? ControlType.FILTER : ControlType.COLOR_OPERATION;\n    this._operation = operation;\n    this._iconName = operation;\n    this._title = operation.toUpperCase();\n    this._filter = filter;\n    this._initializeValues();\n    this.$['*faderEl'].activate({\n      url: this.$['*originalUrl'],\n      operation: this._operation,\n      value: this._filter === FAKE_ORIGINAL_FILTER ? undefined : this.$.value,\n      filter: this._filter === FAKE_ORIGINAL_FILTER ? undefined : this._filter,\n      fromViewer: false\n    });\n  }\n\n  /** @private */\n  _initializeValues() {\n    let {\n      range,\n      zero\n    } = COLOR_OPERATIONS_CONFIG[this._operation];\n    let [min, max] = range;\n    this.$.min = min;\n    this.$.max = max;\n    this.$.zero = zero;\n    let transformation = this.$['*editorTransformations'][this._operation];\n    if (this._controlType === ControlType.FILTER) {\n      let value = max;\n      if (transformation) {\n        let {\n          name,\n          amount\n        } = transformation;\n        value = name === this._filter ? amount : max;\n      }\n      this.$.value = value;\n      this.$.defaultValue = value;\n    }\n    if (this._controlType === ControlType.COLOR_OPERATION) {\n      let value = typeof transformation !== 'undefined' ? transformation : zero;\n      this.$.value = value;\n      this.$.defaultValue = value;\n    }\n  }\n  apply() {\n    let operationValue;\n    if (this._controlType === ControlType.FILTER) {\n      if (this._filter === FAKE_ORIGINAL_FILTER) {\n        operationValue = null;\n      } else {\n        operationValue = {\n          name: this._filter,\n          amount: this.$.value\n        };\n      }\n    } else {\n      operationValue = this.$.value;\n    }\n\n    /** @type {import('./types.js').Transformations} */\n    let transformations = {\n      ...this.$['*editorTransformations'],\n      [this._operation]: operationValue\n    };\n    this.$['*editorTransformations'] = transformations;\n  }\n  cancel() {\n    this.$['*faderEl'].deactivate({\n      hide: false\n    });\n  }\n  initCallback() {\n    super.initCallback();\n    this.sub('*originalUrl', originalUrl => {\n      this._originalUrl = originalUrl;\n    });\n    this.sub('value', value => {\n      let tooltip = `${this._filter || this._operation} ${value}`;\n      this.$['*operationTooltip'] = tooltip;\n    });\n  }\n}\nEditorSlider.template = /* HTML */`\n  <lr-slider-ui\n    ref=\"slider-el\"\n    set=\"disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;\"\n  ></lr-slider-ui>\n`;","map":{"version":3,"names":["Block","COLOR_OPERATIONS_CONFIG","ControlType","FILTER","COLOR_OPERATION","FAKE_ORIGINAL_FILTER","EditorSlider","init$","disabled","min","max","value","defaultValue","zero","$","set","setOperation","operation","filter","_controlType","_operation","_iconName","_title","toUpperCase","_filter","_initializeValues","activate","url","undefined","fromViewer","range","transformation","name","amount","apply","operationValue","transformations","cancel","deactivate","hide","initCallback","sub","originalUrl","_originalUrl","tooltip","template"],"sources":["/Users/David/Documents/own_projects/mp4-to-gif/node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorSlider.js"],"sourcesContent":["import { Block } from '../../../abstract/Block.js';\nimport { COLOR_OPERATIONS_CONFIG } from './toolbar-constants.js';\n\nconst ControlType = {\n  FILTER: 'filter',\n  COLOR_OPERATION: 'color_operation',\n};\n\nexport const FAKE_ORIGINAL_FILTER = 'original';\n\nexport class EditorSlider extends Block {\n  init$ = {\n    ...this.init$,\n    disabled: false,\n    min: 0,\n    max: 100,\n    value: 0,\n    defaultValue: 0,\n    zero: 0,\n    'on.input': (value) => {\n      this.$['*faderEl'].set(value);\n      this.$.value = value;\n    },\n  };\n\n  /**\n   * @param {String} operation\n   * @param {String} [filter]\n   */\n  setOperation(operation, filter) {\n    this._controlType = operation === 'filter' ? ControlType.FILTER : ControlType.COLOR_OPERATION;\n    this._operation = operation;\n    this._iconName = operation;\n    this._title = operation.toUpperCase();\n    this._filter = filter;\n\n    this._initializeValues();\n\n    this.$['*faderEl'].activate({\n      url: this.$['*originalUrl'],\n      operation: this._operation,\n      value: this._filter === FAKE_ORIGINAL_FILTER ? undefined : this.$.value,\n      filter: this._filter === FAKE_ORIGINAL_FILTER ? undefined : this._filter,\n      fromViewer: false,\n    });\n  }\n\n  /** @private */\n  _initializeValues() {\n    let { range, zero } = COLOR_OPERATIONS_CONFIG[this._operation];\n    let [min, max] = range;\n\n    this.$.min = min;\n    this.$.max = max;\n    this.$.zero = zero;\n\n    let transformation = this.$['*editorTransformations'][this._operation];\n    if (this._controlType === ControlType.FILTER) {\n      let value = max;\n      if (transformation) {\n        let { name, amount } = transformation;\n        value = name === this._filter ? amount : max;\n      }\n      this.$.value = value;\n      this.$.defaultValue = value;\n    }\n    if (this._controlType === ControlType.COLOR_OPERATION) {\n      let value = typeof transformation !== 'undefined' ? transformation : zero;\n      this.$.value = value;\n      this.$.defaultValue = value;\n    }\n  }\n\n  apply() {\n    let operationValue;\n    if (this._controlType === ControlType.FILTER) {\n      if (this._filter === FAKE_ORIGINAL_FILTER) {\n        operationValue = null;\n      } else {\n        operationValue = { name: this._filter, amount: this.$.value };\n      }\n    } else {\n      operationValue = this.$.value;\n    }\n\n    /** @type {import('./types.js').Transformations} */\n    let transformations = {\n      ...this.$['*editorTransformations'],\n      [this._operation]: operationValue,\n    };\n\n    this.$['*editorTransformations'] = transformations;\n  }\n\n  cancel() {\n    this.$['*faderEl'].deactivate({ hide: false });\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.sub('*originalUrl', (originalUrl) => {\n      this._originalUrl = originalUrl;\n    });\n\n    this.sub('value', (value) => {\n      let tooltip = `${this._filter || this._operation} ${value}`;\n      this.$['*operationTooltip'] = tooltip;\n    });\n  }\n}\n\nEditorSlider.template = /* HTML */ `\n  <lr-slider-ui\n    ref=\"slider-el\"\n    set=\"disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;\"\n  ></lr-slider-ui>\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}