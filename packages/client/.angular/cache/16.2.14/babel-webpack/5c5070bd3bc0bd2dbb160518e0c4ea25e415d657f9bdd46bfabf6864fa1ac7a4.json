{"ast":null,"code":"import _asyncToGenerator from \"/Users/David/Documents/own_projects/mp4-to-gif/packages/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Block } from '../../abstract/Block.js';\n\n/** @enum {String} */\nconst ICO_MAP = {\n  PLAY: 'play',\n  PAUSE: 'pause',\n  FS_ON: 'fullscreen-on',\n  FS_OFF: 'fullscreen-off',\n  VOL_ON: 'unmute',\n  VOL_OFF: 'mute',\n  CAP_ON: 'captions',\n  CAP_OFF: 'captions-off'\n};\n\n// TODO: refactor and move fullscreen adapter to utils:\nconst FSAPI = {\n  requestFullscreen: el => {\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.webkitRequestFullscreen) {\n      el.webkitRequestFullscreen();\n    }\n  },\n  exitFullscreen: () => {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document['webkitExitFullscreen']) {\n      document['webkitExitFullscreen']();\n    }\n  }\n};\nexport class Video extends Block {\n  togglePlay() {\n    if (this._video.paused || this._video.ended) {\n      this._video.play();\n    } else {\n      this._video.pause();\n    }\n  }\n  toggleFullscreen() {\n    if ((document.fullscreenElement || document['webkitFullscreenElement']) === this) {\n      FSAPI.exitFullscreen();\n    } else {\n      FSAPI.requestFullscreen(this);\n    }\n  }\n  toggleCaptions() {\n    if (this.$.capIcon === ICO_MAP.CAP_OFF) {\n      this.$.capIcon = ICO_MAP.CAP_ON;\n      this._video.textTracks[0].mode = 'showing';\n      window.localStorage.setItem(Video.is + ':captions', '1');\n    } else {\n      this.$.capIcon = ICO_MAP.CAP_OFF;\n      this._video.textTracks[0].mode = 'hidden';\n      window.localStorage.removeItem(Video.is + ':captions');\n    }\n  }\n  toggleSound() {\n    if (this.$.volIcon === ICO_MAP.VOL_ON) {\n      this.$.volIcon = ICO_MAP.VOL_OFF;\n      this.$.volumeDisabled = true;\n      this._video.muted = true;\n    } else {\n      this.$.volIcon = ICO_MAP.VOL_ON;\n      this.$.volumeDisabled = false;\n      this._video.muted = false;\n    }\n  }\n  setVolume(val) {\n    window.localStorage.setItem(Video.is + ':volume', val);\n    let volume = val ? val / 100 : 0;\n    this._video.volume = volume;\n  }\n\n  /** @type {HTMLElement} */\n  get progress() {\n    return this.ref.progress;\n  }\n  init$ = {\n    ...this.init$,\n    src: '',\n    ppIcon: ICO_MAP.PLAY,\n    fsIcon: ICO_MAP.FS_ON,\n    volIcon: ICO_MAP.VOL_ON,\n    capIcon: ICO_MAP.CAP_OFF,\n    totalTime: '00:00',\n    currentTime: '00:00',\n    progressCssWidth: '0',\n    hasSubtitles: false,\n    volumeDisabled: false,\n    volumeValue: 0,\n    onPP: () => {\n      this.togglePlay();\n    },\n    onFs: () => {\n      this.toggleFullscreen();\n    },\n    onCap: () => {\n      this.toggleCaptions();\n    },\n    onMute: () => {\n      this.toggleSound();\n    },\n    onVolChange: e => {\n      // TODO: cast range.value instead of range.$.value\n      let val = parseFloat(e.currentTarget.$.value);\n      this.setVolume(val);\n    },\n    progressClicked: e => {\n      let progressRect = this.progress.getBoundingClientRect();\n      this._video.currentTime = this._video.duration * (e.offsetX / progressRect.width);\n    }\n  };\n\n  /**\n   * @private\n   * @param {String} input\n   */\n  _getUrl(input) {\n    return input.includes('/') ? input : `https://ucarecdn.com/${input}/`;\n  }\n\n  /**\n   * @private\n   * @param {Object<string, any>} desc\n   */\n  _desc2attrs(desc) {\n    let attrs = [];\n    for (let attr in desc) {\n      let val = attr === 'src' ? this._getUrl(desc[attr]) : desc[attr];\n      attrs.push(`${attr}=\"${val}\"`);\n    }\n    return attrs.join(' ');\n  }\n\n  /**\n   * @private\n   * @param {Number} seconds\n   */\n  _timeFmt(seconds) {\n    // TODO: add hours\n    let date = new Date(Math.round(seconds) * 1000);\n    return [date.getMinutes(), date.getSeconds()].map(n => {\n      return n < 10 ? '0' + n : n;\n    }).join(':');\n  }\n\n  /** @private */\n  _initTracks() {\n    [...this._video.textTracks].forEach(track => {\n      track.mode = 'hidden';\n    });\n    if (window.localStorage.getItem(Video.is + ':captions')) {\n      this.toggleCaptions();\n    }\n  }\n\n  /** @private */\n  _castAttributes() {\n    let toCast = ['autoplay', 'loop', 'muted'];\n    [...this.attributes].forEach(attr => {\n      if (toCast.includes(attr.name)) {\n        this._video.setAttribute(attr.name, attr.value);\n      }\n    });\n  }\n  initCallback() {\n    var _this = this;\n    super.initCallback();\n    /**\n     * @private\n     * @type {HTMLVideoElement}\n     */\n    this._video = this.ref.video;\n    this._castAttributes();\n    this._video.addEventListener('play', () => {\n      this.$.ppIcon = ICO_MAP.PAUSE;\n      this.setAttribute('playback', '');\n    });\n    this._video.addEventListener('pause', () => {\n      this.$.ppIcon = ICO_MAP.PLAY;\n      this.removeAttribute('playback');\n    });\n    this.addEventListener('fullscreenchange', e => {\n      console.log(e);\n      if (document.fullscreenElement === this) {\n        this.$.fsIcon = ICO_MAP.FS_OFF;\n      } else {\n        this.$.fsIcon = ICO_MAP.FS_ON;\n      }\n    });\n    this.sub('src', src => {\n      if (!src) {\n        return;\n      }\n      let url = this._getUrl(src);\n      this._video.src = url;\n    });\n    this.sub('video', /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (descPath) {\n        if (!descPath) {\n          return;\n        }\n        let desc = yield (yield window.fetch(_this._getUrl(descPath))).json();\n        if (desc.poster) {\n          _this._video.poster = _this._getUrl(desc.poster);\n        }\n        let html = '';\n        desc?.sources.forEach(srcDesc => {\n          html += /* HTML */`<source ${_this._desc2attrs(srcDesc)} />`;\n        });\n        if (desc.tracks) {\n          desc.tracks.forEach(trackDesc => {\n            html += /* HTML */`<track ${_this._desc2attrs(trackDesc)} />`;\n          });\n          _this.$.hasSubtitles = true;\n        }\n        _this._video.innerHTML += html;\n        _this._initTracks();\n        console.log(desc);\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this._video.addEventListener('loadedmetadata', e => {\n      this.$.currentTime = this._timeFmt(this._video.currentTime);\n      this.$.totalTime = this._timeFmt(this._video.duration);\n    });\n    this._video.addEventListener('timeupdate', e => {\n      let perc = Math.round(100 * (this._video.currentTime / this._video.duration));\n      this.$.progressCssWidth = perc + '%';\n      this.$.currentTime = this._timeFmt(this._video.currentTime);\n    });\n    let volume = window.localStorage.getItem(Video.is + ':volume');\n    if (volume) {\n      let vol = parseFloat(volume);\n      this.setVolume(vol);\n      this.$.volumeValue = vol;\n    }\n  }\n}\nVideo.template = /* HTML */`\n  <div class=\"video-wrapper\">\n    <video ref=\"video\" preload=\"metadata\" crossorigin=\"anonymous\"></video>\n  </div>\n\n  <div class=\"toolbar\">\n    <div class=\"progress\" ref=\"progress\" set -onclick=\"progressClicked\">\n      <div class=\"bar\" set -style.width=\"progressCssWidth\"></div>\n    </div>\n\n    <div class=\"tb-block\">\n      <button set -onclick=\"onPP\">\n        <lr-icon set -@name=\"ppIcon\"></lr-icon>\n      </button>\n      <div class=\"timer\">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class=\"tb-block\">\n      <button set -onclick=\"onCap\" -@hidden=\"!hasSubtitles\">\n        <lr-icon set -@name=\"capIcon\"></lr-icon>\n      </button>\n\n      <button set -onclick=\"onMute\">\n        <lr-icon set -@name=\"volIcon\"></lr-icon>\n      </button>\n\n      <lr-range type=\"range\" set -onchange=\"onVolChange\" -@disabled=\"volumeDisabled\" -value=\"volumeValue\"> </lr-range>\n\n      <button set -onclick=\"onFs\">\n        <lr-icon set -@name=\"fsIcon\"></lr-icon>\n      </button>\n    </div>\n  </div>\n`;\nVideo.bindAttributes({\n  video: 'video',\n  src: 'src'\n});","map":{"version":3,"names":["Block","ICO_MAP","PLAY","PAUSE","FS_ON","FS_OFF","VOL_ON","VOL_OFF","CAP_ON","CAP_OFF","FSAPI","requestFullscreen","el","webkitRequestFullscreen","exitFullscreen","document","Video","togglePlay","_video","paused","ended","play","pause","toggleFullscreen","fullscreenElement","toggleCaptions","$","capIcon","textTracks","mode","window","localStorage","setItem","is","removeItem","toggleSound","volIcon","volumeDisabled","muted","setVolume","val","volume","progress","ref","init$","src","ppIcon","fsIcon","totalTime","currentTime","progressCssWidth","hasSubtitles","volumeValue","onPP","onFs","onCap","onMute","onVolChange","e","parseFloat","currentTarget","value","progressClicked","progressRect","getBoundingClientRect","duration","offsetX","width","_getUrl","input","includes","_desc2attrs","desc","attrs","attr","push","join","_timeFmt","seconds","date","Date","Math","round","getMinutes","getSeconds","map","n","_initTracks","forEach","track","getItem","_castAttributes","toCast","attributes","name","setAttribute","initCallback","_this","video","addEventListener","removeAttribute","console","log","sub","url","_ref","_asyncToGenerator","descPath","fetch","json","poster","html","sources","srcDesc","tracks","trackDesc","innerHTML","_x","apply","arguments","perc","vol","template","bindAttributes"],"sources":["/Users/David/Documents/own_projects/mp4-to-gif/node_modules/@uploadcare/blocks/blocks/Video/Video.js"],"sourcesContent":["import { Block } from '../../abstract/Block.js';\n\n/** @enum {String} */\nconst ICO_MAP = {\n  PLAY: 'play',\n  PAUSE: 'pause',\n  FS_ON: 'fullscreen-on',\n  FS_OFF: 'fullscreen-off',\n  VOL_ON: 'unmute',\n  VOL_OFF: 'mute',\n  CAP_ON: 'captions',\n  CAP_OFF: 'captions-off',\n};\n\n// TODO: refactor and move fullscreen adapter to utils:\nconst FSAPI = {\n  requestFullscreen: (el) => {\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.webkitRequestFullscreen) {\n      el.webkitRequestFullscreen();\n    }\n  },\n  exitFullscreen: () => {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document['webkitExitFullscreen']) {\n      document['webkitExitFullscreen']();\n    }\n  },\n};\n\nexport class Video extends Block {\n  togglePlay() {\n    if (this._video.paused || this._video.ended) {\n      this._video.play();\n    } else {\n      this._video.pause();\n    }\n  }\n\n  toggleFullscreen() {\n    if ((document.fullscreenElement || document['webkitFullscreenElement']) === this) {\n      FSAPI.exitFullscreen();\n    } else {\n      FSAPI.requestFullscreen(this);\n    }\n  }\n\n  toggleCaptions() {\n    if (this.$.capIcon === ICO_MAP.CAP_OFF) {\n      this.$.capIcon = ICO_MAP.CAP_ON;\n      this._video.textTracks[0].mode = 'showing';\n      window.localStorage.setItem(Video.is + ':captions', '1');\n    } else {\n      this.$.capIcon = ICO_MAP.CAP_OFF;\n      this._video.textTracks[0].mode = 'hidden';\n      window.localStorage.removeItem(Video.is + ':captions');\n    }\n  }\n\n  toggleSound() {\n    if (this.$.volIcon === ICO_MAP.VOL_ON) {\n      this.$.volIcon = ICO_MAP.VOL_OFF;\n      this.$.volumeDisabled = true;\n      this._video.muted = true;\n    } else {\n      this.$.volIcon = ICO_MAP.VOL_ON;\n      this.$.volumeDisabled = false;\n      this._video.muted = false;\n    }\n  }\n\n  setVolume(val) {\n    window.localStorage.setItem(Video.is + ':volume', val);\n    let volume = val ? val / 100 : 0;\n    this._video.volume = volume;\n  }\n\n  /** @type {HTMLElement} */\n  get progress() {\n    return this.ref.progress;\n  }\n\n  init$ = {\n    ...this.init$,\n    src: '',\n    ppIcon: ICO_MAP.PLAY,\n    fsIcon: ICO_MAP.FS_ON,\n    volIcon: ICO_MAP.VOL_ON,\n    capIcon: ICO_MAP.CAP_OFF,\n    totalTime: '00:00',\n    currentTime: '00:00',\n    progressCssWidth: '0',\n    hasSubtitles: false,\n    volumeDisabled: false,\n    volumeValue: 0,\n    onPP: () => {\n      this.togglePlay();\n    },\n    onFs: () => {\n      this.toggleFullscreen();\n    },\n    onCap: () => {\n      this.toggleCaptions();\n    },\n    onMute: () => {\n      this.toggleSound();\n    },\n    onVolChange: (e) => {\n      // TODO: cast range.value instead of range.$.value\n      let val = parseFloat(e.currentTarget.$.value);\n      this.setVolume(val);\n    },\n    progressClicked: (e) => {\n      let progressRect = this.progress.getBoundingClientRect();\n      this._video.currentTime = this._video.duration * (e.offsetX / progressRect.width);\n    },\n  };\n\n  /**\n   * @private\n   * @param {String} input\n   */\n  _getUrl(input) {\n    return input.includes('/') ? input : `https://ucarecdn.com/${input}/`;\n  }\n\n  /**\n   * @private\n   * @param {Object<string, any>} desc\n   */\n  _desc2attrs(desc) {\n    let attrs = [];\n    for (let attr in desc) {\n      let val = attr === 'src' ? this._getUrl(desc[attr]) : desc[attr];\n      attrs.push(`${attr}=\"${val}\"`);\n    }\n    return attrs.join(' ');\n  }\n\n  /**\n   * @private\n   * @param {Number} seconds\n   */\n  _timeFmt(seconds) {\n    // TODO: add hours\n    let date = new Date(Math.round(seconds) * 1000);\n    return [date.getMinutes(), date.getSeconds()]\n      .map((n) => {\n        return n < 10 ? '0' + n : n;\n      })\n      .join(':');\n  }\n\n  /** @private */\n  _initTracks() {\n    [...this._video.textTracks].forEach((track) => {\n      track.mode = 'hidden';\n    });\n    if (window.localStorage.getItem(Video.is + ':captions')) {\n      this.toggleCaptions();\n    }\n  }\n\n  /** @private */\n  _castAttributes() {\n    let toCast = ['autoplay', 'loop', 'muted'];\n    [...this.attributes].forEach((attr) => {\n      if (toCast.includes(attr.name)) {\n        this._video.setAttribute(attr.name, attr.value);\n      }\n    });\n  }\n\n  initCallback() {\n    super.initCallback();\n    /**\n     * @private\n     * @type {HTMLVideoElement}\n     */\n    this._video = this.ref.video;\n\n    this._castAttributes();\n\n    this._video.addEventListener('play', () => {\n      this.$.ppIcon = ICO_MAP.PAUSE;\n      this.setAttribute('playback', '');\n    });\n\n    this._video.addEventListener('pause', () => {\n      this.$.ppIcon = ICO_MAP.PLAY;\n      this.removeAttribute('playback');\n    });\n\n    this.addEventListener('fullscreenchange', (e) => {\n      console.log(e);\n      if (document.fullscreenElement === this) {\n        this.$.fsIcon = ICO_MAP.FS_OFF;\n      } else {\n        this.$.fsIcon = ICO_MAP.FS_ON;\n      }\n    });\n\n    this.sub('src', (src) => {\n      if (!src) {\n        return;\n      }\n      let url = this._getUrl(src);\n      this._video.src = url;\n    });\n\n    this.sub('video', async (descPath) => {\n      if (!descPath) {\n        return;\n      }\n      let desc = await (await window.fetch(this._getUrl(descPath))).json();\n\n      if (desc.poster) {\n        this._video.poster = this._getUrl(desc.poster);\n      }\n\n      let html = '';\n      desc?.sources.forEach((srcDesc) => {\n        html += /* HTML */ `<source ${this._desc2attrs(srcDesc)} />`;\n      });\n\n      if (desc.tracks) {\n        desc.tracks.forEach((trackDesc) => {\n          html += /* HTML */ `<track ${this._desc2attrs(trackDesc)} />`;\n        });\n        this.$.hasSubtitles = true;\n      }\n\n      this._video.innerHTML += html;\n\n      this._initTracks();\n      console.log(desc);\n    });\n\n    this._video.addEventListener('loadedmetadata', (e) => {\n      this.$.currentTime = this._timeFmt(this._video.currentTime);\n      this.$.totalTime = this._timeFmt(this._video.duration);\n    });\n\n    this._video.addEventListener('timeupdate', (e) => {\n      let perc = Math.round(100 * (this._video.currentTime / this._video.duration));\n      this.$.progressCssWidth = perc + '%';\n      this.$.currentTime = this._timeFmt(this._video.currentTime);\n    });\n\n    let volume = window.localStorage.getItem(Video.is + ':volume');\n    if (volume) {\n      let vol = parseFloat(volume);\n      this.setVolume(vol);\n      this.$.volumeValue = vol;\n    }\n  }\n}\n\nVideo.template = /* HTML */ `\n  <div class=\"video-wrapper\">\n    <video ref=\"video\" preload=\"metadata\" crossorigin=\"anonymous\"></video>\n  </div>\n\n  <div class=\"toolbar\">\n    <div class=\"progress\" ref=\"progress\" set -onclick=\"progressClicked\">\n      <div class=\"bar\" set -style.width=\"progressCssWidth\"></div>\n    </div>\n\n    <div class=\"tb-block\">\n      <button set -onclick=\"onPP\">\n        <lr-icon set -@name=\"ppIcon\"></lr-icon>\n      </button>\n      <div class=\"timer\">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class=\"tb-block\">\n      <button set -onclick=\"onCap\" -@hidden=\"!hasSubtitles\">\n        <lr-icon set -@name=\"capIcon\"></lr-icon>\n      </button>\n\n      <button set -onclick=\"onMute\">\n        <lr-icon set -@name=\"volIcon\"></lr-icon>\n      </button>\n\n      <lr-range type=\"range\" set -onchange=\"onVolChange\" -@disabled=\"volumeDisabled\" -value=\"volumeValue\"> </lr-range>\n\n      <button set -onclick=\"onFs\">\n        <lr-icon set -@name=\"fsIcon\"></lr-icon>\n      </button>\n    </div>\n  </div>\n`;\n\nVideo.bindAttributes({\n  video: 'video',\n  src: 'src',\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}