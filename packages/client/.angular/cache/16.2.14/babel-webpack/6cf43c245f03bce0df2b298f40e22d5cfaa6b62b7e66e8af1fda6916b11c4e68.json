{"ast":null,"code":"import _asyncToGenerator from \"/Users/David/Documents/own_projects/mp4-to-gif/packages/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// core/Data.js\nfunction cloneObj(obj) {\n  let clone = o => {\n    var _a;\n    for (let prop in o) {\n      if (((_a = o[prop]) == null ? void 0 : _a.constructor) === Object) {\n        o[prop] = clone(o[prop]);\n      }\n    }\n    return {\n      ...o\n    };\n  };\n  return clone(obj);\n}\nvar Data = class {\n  constructor(schema) {\n    if (schema.constructor === Object) {\n      this.store = cloneObj(schema);\n    } else {\n      this._storeIsProxy = true;\n      this.store = schema;\n    }\n    this.callbackMap = Object.create(null);\n  }\n  static warn(actionName, prop) {\n    console.warn(`Symbiote Data: cannot ${actionName}. Prop name: ` + prop);\n  }\n  read(prop) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"read\", prop);\n      return null;\n    }\n    return this.store[prop];\n  }\n  has(prop) {\n    return this._storeIsProxy ? this.store[prop] !== void 0 : this.store.hasOwnProperty(prop);\n  }\n  add(prop, val, rewrite = false) {\n    if (!rewrite && Object.keys(this.store).includes(prop)) {\n      return;\n    }\n    this.store[prop] = val;\n    this.notify(prop);\n  }\n  pub(prop, val) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"publish\", prop);\n      return;\n    }\n    this.store[prop] = val;\n    this.notify(prop);\n  }\n  multiPub(updObj) {\n    for (let prop in updObj) {\n      this.pub(prop, updObj[prop]);\n    }\n  }\n  notify(prop) {\n    if (this.callbackMap[prop]) {\n      this.callbackMap[prop].forEach(callback => {\n        callback(this.store[prop]);\n      });\n    }\n  }\n  sub(prop, callback, init = true) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"subscribe\", prop);\n      return null;\n    }\n    if (!this.callbackMap[prop]) {\n      this.callbackMap[prop] = /* @__PURE__ */new Set();\n    }\n    this.callbackMap[prop].add(callback);\n    if (init) {\n      callback(this.store[prop]);\n    }\n    return {\n      remove: () => {\n        this.callbackMap[prop].delete(callback);\n        if (!this.callbackMap[prop].size) {\n          delete this.callbackMap[prop];\n        }\n      },\n      callback\n    };\n  }\n  static registerCtx(schema, uid = Symbol()) {\n    let data = Data.globalStore.get(uid);\n    if (data) {\n      console.warn('State: context UID \"' + uid + '\" already in use');\n    } else {\n      data = new Data(schema);\n      Data.globalStore.set(uid, data);\n    }\n    return data;\n  }\n  static deleteCtx(uid) {\n    Data.globalStore.delete(uid);\n  }\n  static getCtx(uid, notify = true) {\n    return Data.globalStore.get(uid) || (notify && console.warn('State: wrong context UID - \"' + uid + '\"'), null);\n  }\n};\nData.globalStore = /* @__PURE__ */new Map();\n\n// core/dictionary.js\nvar DICT = Object.freeze({\n  BIND_ATTR: \"set\",\n  ATTR_BIND_PRFX: \"@\",\n  EXT_DATA_CTX_PRFX: \"*\",\n  NAMED_DATA_CTX_SPLTR: \"/\",\n  CTX_NAME_ATTR: \"ctx-name\",\n  CTX_OWNER_ATTR: \"ctx-owner\",\n  CSS_CTX_PROP: \"--ctx-name\",\n  EL_REF_ATTR: \"ref\",\n  AUTO_TAG_PRFX: \"sym\",\n  REPEAT_ATTR: \"repeat\",\n  REPEAT_ITEM_TAG_ATTR: \"repeat-item-tag\",\n  SET_LATER_KEY: \"__toSetLater__\",\n  USE_TPL: \"use-template\",\n  ROOT_STYLE_ATTR_NAME: \"sym-component\"\n});\n\n// utils/UID.js\nvar CHARS = \"1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm\";\nvar CHLENGTH = CHARS.length - 1;\nvar UID = class {\n  static generate(pattern = \"XXXXXXXXX-XXX\") {\n    let uid = \"\";\n    for (let i = 0; i < pattern.length; i++) {\n      uid += pattern[i] === \"-\" ? pattern[i] : CHARS.charAt(Math.random() * CHLENGTH);\n    }\n    return uid;\n  }\n};\n\n// utils/setNestedProp.js\nfunction setNestedProp(parent, path, value) {\n  let success = true;\n  let lastStep;\n  let propPath = path.split(\".\");\n  propPath.forEach((step, idx) => {\n    if (idx < propPath.length - 1) {\n      parent = parent[step];\n    } else {\n      lastStep = step;\n    }\n  });\n  if (parent) {\n    parent[lastStep] = value;\n  } else {\n    success = false;\n  }\n  return success;\n}\n\n// utils/kebabToCamel.js\nfunction kebabToCamel(string) {\n  return string.split(\"-\").map((p, i) => {\n    return p && i ? p[0].toUpperCase() + p.slice(1) : p;\n  }).join(\"\").split(\"_\").map((p, i) => {\n    return p && i ? p.toUpperCase() : p;\n  }).join(\"\");\n}\n\n// core/repeatProcessor.js\nfunction repeatProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.REPEAT_ATTR}]`)].forEach(el => {\n    let itemTag = el.getAttribute(DICT.REPEAT_ITEM_TAG_ATTR);\n    let itemClass;\n    if (itemTag) {\n      itemClass = window.customElements.get(itemTag);\n    }\n    if (!itemClass) {\n      itemClass = class extends fnCtx.BaseComponent {\n        constructor() {\n          super();\n          if (!itemTag) {\n            this.style.display = \"contents\";\n          }\n        }\n      };\n      let itemTpl = el.innerHTML;\n      itemClass.template = itemTpl;\n      itemClass.reg(itemTag);\n    }\n    while (el.firstChild) {\n      el.firstChild.remove();\n    }\n    let repeatDataKey = el.getAttribute(DICT.REPEAT_ATTR);\n    fnCtx.sub(repeatDataKey, data => {\n      if (!data) {\n        while (el.firstChild) {\n          el.firstChild.remove();\n        }\n        return;\n      }\n      let currentList = [...el.children];\n      let fragment;\n      let fillItems = items => {\n        items.forEach((item, idx) => {\n          if (currentList[idx]) {\n            if (currentList[idx].set$) {\n              setTimeout(() => {\n                currentList[idx].set$(item);\n              });\n            } else {\n              for (let k in item) {\n                currentList[idx][k] = item[k];\n              }\n            }\n          } else {\n            if (!fragment) {\n              fragment = new DocumentFragment();\n            }\n            let repeatItem = new itemClass();\n            Object.assign(repeatItem.init$, item);\n            fragment.appendChild(repeatItem);\n          }\n        });\n        fragment && el.appendChild(fragment);\n        let oversize = currentList.slice(items.length, currentList.length);\n        for (let exItm of oversize) {\n          exItm.remove();\n        }\n      };\n      if (data.constructor === Array) {\n        fillItems(data);\n      } else if (data.constructor === Object) {\n        let items = [];\n        for (let itemKey in data) {\n          let init = data[itemKey];\n          Object.defineProperty(init, \"_KEY_\", {\n            value: itemKey,\n            enumerable: true\n          });\n          items.push(init);\n        }\n        fillItems(items);\n      } else {\n        console.warn(\"Symbiote repeat data type error:\");\n        console.log(data);\n      }\n    });\n    el.removeAttribute(DICT.REPEAT_ATTR);\n    el.removeAttribute(DICT.REPEAT_ITEM_TAG_ATTR);\n  });\n}\n\n// core/tpl-processors.js\nvar DEFAULT_SLOT_KEY = \"__default__\";\nfunction slotProcessor(fr, fnCtx) {\n  if (fnCtx.shadowRoot) {\n    return;\n  }\n  let slots = [...fr.querySelectorAll(\"slot\")];\n  if (!slots.length) {\n    return;\n  }\n  let slotMap = {};\n  slots.forEach(slot => {\n    let slotName = slot.getAttribute(\"name\") || DEFAULT_SLOT_KEY;\n    slotMap[slotName] = {\n      slot,\n      fr: document.createDocumentFragment()\n    };\n  });\n  fnCtx.initChildren.forEach(child => {\n    var _a;\n    let slotName = DEFAULT_SLOT_KEY;\n    if (child instanceof Element && child.hasAttribute(\"slot\")) {\n      slotName = child.getAttribute(\"slot\");\n      child.removeAttribute(\"slot\");\n    }\n    (_a = slotMap[slotName]) == null ? void 0 : _a.fr.appendChild(child);\n  });\n  Object.values(slotMap).forEach(mapObj => {\n    if (mapObj.fr.childNodes.length) {\n      mapObj.slot.parentNode.replaceChild(mapObj.fr, mapObj.slot);\n    } else if (mapObj.slot.childNodes.length) {\n      let slotFr = document.createDocumentFragment();\n      slotFr.append(...mapObj.slot.childNodes);\n      mapObj.slot.parentNode.replaceChild(slotFr, mapObj.slot);\n    } else {\n      mapObj.slot.remove();\n    }\n  });\n}\nfunction refProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.EL_REF_ATTR}]`)].forEach(el => {\n    let refName = el.getAttribute(DICT.EL_REF_ATTR);\n    fnCtx.ref[refName] = el;\n    el.removeAttribute(DICT.EL_REF_ATTR);\n  });\n}\nfunction domSetProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.BIND_ATTR}]`)].forEach(el => {\n    let subStr = el.getAttribute(DICT.BIND_ATTR);\n    let keyValArr = subStr.split(\";\");\n    [...el.attributes].forEach(attr => {\n      if (attr.name.startsWith(\"-\") && attr.value) {\n        let key = kebabToCamel(attr.name.replace(\"-\", \"\"));\n        keyValArr.push(key + \":\" + attr.value);\n        el.removeAttribute(attr.name);\n      }\n    });\n    keyValArr.forEach(keyValStr => {\n      if (!keyValStr) {\n        return;\n      }\n      let kv = keyValStr.split(\":\").map(str => str.trim());\n      let prop = kv[0];\n      let isAttr;\n      if (prop.indexOf(DICT.ATTR_BIND_PRFX) === 0) {\n        isAttr = true;\n        prop = prop.replace(DICT.ATTR_BIND_PRFX, \"\");\n      }\n      let valKeysArr = kv[1].split(\",\").map(valKey => {\n        return valKey.trim();\n      });\n      for (let valKey of valKeysArr) {\n        let castType;\n        if (valKey.startsWith(\"!!\")) {\n          castType = \"double\";\n          valKey = valKey.replace(\"!!\", \"\");\n        } else if (valKey.startsWith(\"!\")) {\n          castType = \"single\";\n          valKey = valKey.replace(\"!\", \"\");\n        }\n        fnCtx.sub(valKey, val => {\n          if (castType === \"double\") {\n            val = !!val;\n          } else if (castType === \"single\") {\n            val = !val;\n          }\n          if (isAttr) {\n            if ((val == null ? void 0 : val.constructor) === Boolean) {\n              val ? el.setAttribute(prop, \"\") : el.removeAttribute(prop);\n            } else {\n              el.setAttribute(prop, val);\n            }\n          } else {\n            if (!setNestedProp(el, prop, val)) {\n              if (!el[DICT.SET_LATER_KEY]) {\n                el[DICT.SET_LATER_KEY] = Object.create(null);\n              }\n              el[DICT.SET_LATER_KEY][prop] = val;\n            }\n          }\n        });\n      }\n    });\n    el.removeAttribute(DICT.BIND_ATTR);\n  });\n}\nvar OPEN_TOKEN = \"{{\";\nvar CLOSE_TOKEN = \"}}\";\nvar SKIP_ATTR = \"skip-text\";\nfunction getTextNodesWithTokens(el) {\n  let node;\n  let result = [];\n  let walk = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, {\n    acceptNode: txt => {\n      var _a;\n      return !((_a = txt.parentElement) == null ? void 0 : _a.hasAttribute(SKIP_ATTR)) && txt.textContent.includes(OPEN_TOKEN) && txt.textContent.includes(CLOSE_TOKEN) && 1;\n    }\n  });\n  while (node = walk.nextNode()) {\n    result.push(node);\n  }\n  return result;\n}\nvar txtNodesProcessor = function (fr, fnCtx) {\n  let txtNodes = getTextNodesWithTokens(fr);\n  txtNodes.forEach(txtNode => {\n    let tokenNodes = [];\n    let offset;\n    while (txtNode.textContent.includes(CLOSE_TOKEN)) {\n      if (txtNode.textContent.startsWith(OPEN_TOKEN)) {\n        offset = txtNode.textContent.indexOf(CLOSE_TOKEN) + CLOSE_TOKEN.length;\n        txtNode.splitText(offset);\n        tokenNodes.push(txtNode);\n      } else {\n        offset = txtNode.textContent.indexOf(OPEN_TOKEN);\n        txtNode.splitText(offset);\n      }\n      txtNode = txtNode.nextSibling;\n    }\n    tokenNodes.forEach(tNode => {\n      let prop = tNode.textContent.replace(OPEN_TOKEN, \"\").replace(CLOSE_TOKEN, \"\");\n      tNode.textContent = \"\";\n      fnCtx.sub(prop, val => {\n        tNode.textContent = val;\n      });\n    });\n  });\n};\nvar tpl_processors_default = [repeatProcessor, slotProcessor, refProcessor, domSetProcessor, txtNodesProcessor];\n\n// utils/parseCssPropertyValue.js\nvar SINGLE_QUOTE = \"'\";\nvar DOUBLE_QUOTE = '\"';\nvar ESCAPED_PATTERN = /\\\\([0-9a-fA-F]{1,6} ?)/g;\nfunction hasLeadingTrailingQuotes(str) {\n  return (str[0] === DOUBLE_QUOTE || str[0] === SINGLE_QUOTE) && (str[str.length - 1] === DOUBLE_QUOTE || str[str.length - 1] === SINGLE_QUOTE);\n}\nfunction trimQuotes(str) {\n  if (str[0] === DOUBLE_QUOTE || str[0] === SINGLE_QUOTE) {\n    str = str.slice(1);\n  }\n  if (str[str.length - 1] === DOUBLE_QUOTE || str[str.length - 1] === SINGLE_QUOTE) {\n    str = str.slice(0, -1);\n  }\n  return str;\n}\nfunction escapeQuotes(str) {\n  let result = \"\";\n  let prev = \"\";\n  for (var i = 0; i < str.length; i++) {\n    const next = str[i + 1];\n    if (str[i] === \"\\\\\" && next === '\"') {\n      result += '\\\\\"';\n      i++;\n    } else if (str[i] === '\"' && prev !== \"\\\\\") {\n      result += '\\\\\"';\n    } else {\n      result += str[i];\n    }\n    prev = str[i];\n  }\n  return result;\n}\nfunction parseCssPropertyValue(input) {\n  let output = input;\n  if (hasLeadingTrailingQuotes(input)) {\n    output = trimQuotes(output);\n    output = output.replace(ESCAPED_PATTERN, (match, p1) => {\n      return String.fromCodePoint(parseInt(p1.trim(), 16));\n    });\n    output = output.replaceAll(\"\\\\\\n\", \"\\\\n\");\n    output = escapeQuotes(output);\n    output = DOUBLE_QUOTE + output + DOUBLE_QUOTE;\n  }\n  try {\n    return JSON.parse(output);\n  } catch (err) {\n    throw new Error(`Failed to parse CSS property value: ${output}. Original input: ${input}`);\n  }\n}\n\n// core/BaseComponent.js\nvar autoTagsCount = 0;\nvar styleMutationObserver = null;\nvar styleMutationObserverCbList = null;\nvar _BaseComponent = class extends HTMLElement {\n  constructor() {\n    super();\n    __publicField(this, \"updateCssData\", () => {\n      var _a;\n      this.dropCssDataCache();\n      (_a = this.__boundCssProps) == null ? void 0 : _a.forEach(ctxProp => {\n        let val = this.getCssData(this.__extractCssName(ctxProp), true);\n        val !== null && this.$[ctxProp] !== val && (this.$[ctxProp] = val);\n      });\n    });\n    this.init$ = Object.create(null);\n    this.cssInit$ = Object.create(null);\n    this.tplProcessors = /* @__PURE__ */new Set();\n    this.ref = Object.create(null);\n    this.allSubs = /* @__PURE__ */new Set();\n    this.pauseRender = false;\n    this.renderShadow = false;\n    this.readyToDestroy = true;\n    this.processInnerHtml = false;\n    this.allowCustomTemplate = false;\n    this.ctxOwner = false;\n  }\n  get BaseComponent() {\n    return _BaseComponent;\n  }\n  initCallback() {}\n  __initCallback() {\n    var _a;\n    if (this.__initialized) {\n      return;\n    }\n    this.__initialized = true;\n    (_a = this.initCallback) == null ? void 0 : _a.call(this);\n  }\n  render(template, shadow = this.renderShadow) {\n    let fr;\n    if ((shadow || this.constructor[\"__shadowStylesUrl\"]) && !this.shadowRoot) {\n      this.attachShadow({\n        mode: \"open\"\n      });\n    }\n    if (this.allowCustomTemplate) {\n      let customTplSelector = this.getAttribute(DICT.USE_TPL);\n      if (customTplSelector) {\n        let root = this.getRootNode();\n        let customTpl = (root == null ? void 0 : root.querySelector(customTplSelector)) || document.querySelector(customTplSelector);\n        if (customTpl) {\n          template = customTpl.content.cloneNode(true);\n        } else {\n          console.warn(`Symbiote template \"${customTplSelector}\" is not found...`);\n        }\n      }\n    }\n    if (this.processInnerHtml) {\n      for (let fn of this.tplProcessors) {\n        fn(this, this);\n      }\n    }\n    if (template || this.constructor[\"template\"]) {\n      if (this.constructor[\"template\"] && !this.constructor[\"__tpl\"]) {\n        this.constructor[\"__tpl\"] = document.createElement(\"template\");\n        this.constructor[\"__tpl\"].innerHTML = this.constructor[\"template\"];\n      }\n      if ((template == null ? void 0 : template.constructor) === DocumentFragment) {\n        fr = template;\n      } else if ((template == null ? void 0 : template.constructor) === String) {\n        let tpl = document.createElement(\"template\");\n        tpl.innerHTML = template;\n        fr = tpl.content.cloneNode(true);\n      } else if (this.constructor[\"__tpl\"]) {\n        fr = this.constructor[\"__tpl\"].content.cloneNode(true);\n      }\n      for (let fn of this.tplProcessors) {\n        fn(fr, this);\n      }\n    }\n    let addFr = () => {\n      fr && (shadow && this.shadowRoot.appendChild(fr) || this.appendChild(fr));\n      this.__initCallback();\n    };\n    if (this.constructor[\"__shadowStylesUrl\"]) {\n      shadow = true;\n      let styleLink = document.createElement(\"link\");\n      styleLink.rel = \"stylesheet\";\n      styleLink.href = this.constructor[\"__shadowStylesUrl\"];\n      styleLink.onload = addFr;\n      this.shadowRoot.prepend(styleLink);\n    } else {\n      addFr();\n    }\n  }\n  addTemplateProcessor(processorFn) {\n    this.tplProcessors.add(processorFn);\n  }\n  get autoCtxName() {\n    if (!this.__autoCtxName) {\n      this.__autoCtxName = UID.generate();\n      this.style.setProperty(DICT.CSS_CTX_PROP, `'${this.__autoCtxName}'`);\n    }\n    return this.__autoCtxName;\n  }\n  get cssCtxName() {\n    return this.getCssData(DICT.CSS_CTX_PROP, true);\n  }\n  get ctxName() {\n    var _a;\n    let ctxName = ((_a = this.getAttribute(DICT.CTX_NAME_ATTR)) == null ? void 0 : _a.trim()) || this.cssCtxName || this.__cachedCtxName || this.autoCtxName;\n    this.__cachedCtxName = ctxName;\n    return ctxName;\n  }\n  get localCtx() {\n    if (!this.__localCtx) {\n      this.__localCtx = Data.registerCtx({}, this);\n    }\n    return this.__localCtx;\n  }\n  get nodeCtx() {\n    return Data.getCtx(this.ctxName, false) || Data.registerCtx({}, this.ctxName);\n  }\n  static __parseProp(prop, fnCtx) {\n    let ctx;\n    let name;\n    if (prop.startsWith(DICT.EXT_DATA_CTX_PRFX)) {\n      ctx = fnCtx.nodeCtx;\n      name = prop.replace(DICT.EXT_DATA_CTX_PRFX, \"\");\n    } else if (prop.includes(DICT.NAMED_DATA_CTX_SPLTR)) {\n      let pArr = prop.split(DICT.NAMED_DATA_CTX_SPLTR);\n      ctx = Data.getCtx(pArr[0]);\n      name = pArr[1];\n    } else {\n      ctx = fnCtx.localCtx;\n      name = prop;\n    }\n    return {\n      ctx,\n      name\n    };\n  }\n  sub(prop, handler, init = true) {\n    let subCb = val => {\n      if (!this.isConnected) {\n        return;\n      }\n      handler(val);\n    };\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    if (!parsed.ctx.has(parsed.name)) {\n      window.setTimeout(() => {\n        this.allSubs.add(parsed.ctx.sub(parsed.name, subCb, init));\n      });\n    } else {\n      this.allSubs.add(parsed.ctx.sub(parsed.name, subCb, init));\n    }\n  }\n  notify(prop) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    parsed.ctx.notify(parsed.name);\n  }\n  has(prop) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    return parsed.ctx.has(parsed.name);\n  }\n  add(prop, val, rewrite = false) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    parsed.ctx.add(parsed.name, val, rewrite);\n  }\n  add$(obj, rewrite = false) {\n    for (let prop in obj) {\n      this.add(prop, obj[prop], rewrite);\n    }\n  }\n  get $() {\n    if (!this.__stateProxy) {\n      let o = Object.create(null);\n      this.__stateProxy = new Proxy(o, {\n        set: (obj, prop, val) => {\n          let parsed = _BaseComponent.__parseProp(prop, this);\n          parsed.ctx.pub(parsed.name, val);\n          return true;\n        },\n        get: (obj, prop) => {\n          let parsed = _BaseComponent.__parseProp(prop, this);\n          return parsed.ctx.read(parsed.name);\n        }\n      });\n    }\n    return this.__stateProxy;\n  }\n  set$(kvObj, forcePrimitives = false) {\n    for (let key in kvObj) {\n      let val = kvObj[key];\n      let primArr = [String, Number, Boolean];\n      if (forcePrimitives || !primArr.includes(val == null ? void 0 : val.constructor)) {\n        this.$[key] = val;\n      } else {\n        this.$[key] !== val && (this.$[key] = val);\n      }\n    }\n  }\n  get __ctxOwner() {\n    return this.ctxOwner || this.hasAttribute(DICT.CTX_OWNER_ATTR) && this.getAttribute(DICT.CTX_OWNER_ATTR) !== \"false\";\n  }\n  __initDataCtx() {\n    let attrDesc = this.constructor[\"__attrDesc\"];\n    if (attrDesc) {\n      for (let prop of Object.values(attrDesc)) {\n        if (!Object.keys(this.init$).includes(prop)) {\n          this.init$[prop] = \"\";\n        }\n      }\n    }\n    for (let prop in this.init$) {\n      if (prop.startsWith(DICT.EXT_DATA_CTX_PRFX)) {\n        this.nodeCtx.add(prop.replace(DICT.EXT_DATA_CTX_PRFX, \"\"), this.init$[prop], this.__ctxOwner);\n      } else if (prop.includes(DICT.NAMED_DATA_CTX_SPLTR)) {\n        let propArr = prop.split(DICT.NAMED_DATA_CTX_SPLTR);\n        let ctxName = propArr[0].trim();\n        let propName = propArr[1].trim();\n        if (ctxName && propName) {\n          let namedCtx = Data.getCtx(ctxName, false);\n          if (!namedCtx) {\n            namedCtx = Data.registerCtx({}, ctxName);\n          }\n          namedCtx.add(propName, this.init$[prop]);\n        }\n      } else {\n        this.localCtx.add(prop, this.init$[prop]);\n      }\n    }\n    for (let cssProp in this.cssInit$) {\n      this.bindCssData(cssProp, this.cssInit$[cssProp]);\n    }\n    this.__dataCtxInitialized = true;\n  }\n  connectedCallback() {\n    var _a;\n    if (!this.isConnected) {\n      return;\n    }\n    if (this.__disconnectTimeout) {\n      window.clearTimeout(this.__disconnectTimeout);\n    }\n    if (!this.connectedOnce) {\n      let ctxNameAttrVal = (_a = this.getAttribute(DICT.CTX_NAME_ATTR)) == null ? void 0 : _a.trim();\n      if (ctxNameAttrVal) {\n        this.style.setProperty(DICT.CSS_CTX_PROP, `'${ctxNameAttrVal}'`);\n      }\n      this.__initDataCtx();\n      if (this[DICT.SET_LATER_KEY]) {\n        for (let prop in this[DICT.SET_LATER_KEY]) {\n          setNestedProp(this, prop, this[DICT.SET_LATER_KEY][prop]);\n        }\n        delete this[DICT.SET_LATER_KEY];\n      }\n      this.initChildren = [...this.childNodes];\n      for (let proc of tpl_processors_default) {\n        this.addTemplateProcessor(proc);\n      }\n      if (this.pauseRender) {\n        this.__initCallback();\n      } else {\n        if (this.constructor[\"__rootStylesLink\"]) {\n          let root = this.getRootNode();\n          if (!root) {\n            return;\n          }\n          let hasLink = root == null ? void 0 : root.querySelector(`link[${DICT.ROOT_STYLE_ATTR_NAME}=\"${this.constructor.is}\"]`);\n          if (hasLink) {\n            this.render();\n            return;\n          }\n          let rootLink = this.constructor[\"__rootStylesLink\"].cloneNode(true);\n          rootLink.setAttribute(DICT.ROOT_STYLE_ATTR_NAME, this.constructor[\"is\"]);\n          rootLink.onload = () => {\n            this.render();\n          };\n          root.nodeType === Node.DOCUMENT_NODE ? root.head.appendChild(rootLink) : root.prepend(rootLink);\n        } else {\n          this.render();\n        }\n      }\n    }\n    this.connectedOnce = true;\n  }\n  destroyCallback() {}\n  disconnectedCallback() {\n    if (!this.connectedOnce) {\n      return;\n    }\n    this.dropCssDataCache();\n    if (!this.readyToDestroy) {\n      return;\n    }\n    if (this.__disconnectTimeout) {\n      window.clearTimeout(this.__disconnectTimeout);\n    }\n    this.__disconnectTimeout = window.setTimeout(() => {\n      this.destroyCallback();\n      for (let sub of this.allSubs) {\n        sub.remove();\n        this.allSubs.delete(sub);\n      }\n      for (let proc of this.tplProcessors) {\n        this.tplProcessors.delete(proc);\n      }\n      styleMutationObserverCbList == null ? void 0 : styleMutationObserverCbList.delete(this.updateCssData);\n      if (!(styleMutationObserverCbList == null ? void 0 : styleMutationObserverCbList.size)) {\n        styleMutationObserver == null ? void 0 : styleMutationObserver.disconnect();\n        styleMutationObserver = null;\n        styleMutationObserverCbList = null;\n      }\n    }, 100);\n  }\n  static reg(tagName, isAlias = false) {\n    if (!tagName) {\n      autoTagsCount++;\n      tagName = `${DICT.AUTO_TAG_PRFX}-${autoTagsCount}`;\n    }\n    this.__tag = tagName;\n    let registeredClass = window.customElements.get(tagName);\n    if (registeredClass) {\n      if (!isAlias && registeredClass !== this) {\n        console.warn([`Element with tag name \"${tagName}\" already registered.`, `You're trying to override it with another class \"${this.name}\".`, `This is most likely a mistake.`, `New element will not be registered.`].join(\"\\n\"));\n      }\n      return;\n    }\n    window.customElements.define(tagName, isAlias ? class extends this {} : this);\n  }\n  static get is() {\n    if (!this.__tag) {\n      this.reg();\n    }\n    return this.__tag;\n  }\n  static bindAttributes(desc) {\n    this.observedAttributes = Object.keys(desc);\n    this.__attrDesc = desc;\n  }\n  attributeChangedCallback(name, oldVal, newVal) {\n    var _a;\n    if (oldVal === newVal) {\n      return;\n    }\n    let $prop = (_a = this.constructor[\"__attrDesc\"]) == null ? void 0 : _a[name];\n    if ($prop) {\n      if (this.__dataCtxInitialized) {\n        this.$[$prop] = newVal;\n      } else {\n        this.init$[$prop] = newVal;\n      }\n    } else {\n      this[name] = newVal;\n    }\n  }\n  getCssData(propName, silentCheck = false) {\n    if (!this.__cssDataCache) {\n      this.__cssDataCache = Object.create(null);\n    }\n    if (!Object.keys(this.__cssDataCache).includes(propName)) {\n      if (!this.__computedStyle) {\n        this.__computedStyle = window.getComputedStyle(this);\n      }\n      let val = this.__computedStyle.getPropertyValue(propName).trim();\n      try {\n        this.__cssDataCache[propName] = parseCssPropertyValue(val);\n      } catch (e) {\n        !silentCheck && console.warn(`CSS Data error: ${propName}`);\n        this.__cssDataCache[propName] = null;\n      }\n    }\n    return this.__cssDataCache[propName];\n  }\n  __extractCssName(ctxPropName) {\n    return ctxPropName.split(\"--\").map((part, idx) => {\n      return idx === 0 ? \"\" : part;\n    }).join(\"--\");\n  }\n  __initStyleAttrObserver() {\n    if (!styleMutationObserverCbList) {\n      styleMutationObserverCbList = /* @__PURE__ */new Set();\n    }\n    styleMutationObserverCbList.add(this.updateCssData);\n    if (!styleMutationObserver) {\n      styleMutationObserver = new MutationObserver(records => {\n        records[0].type === \"attributes\" && styleMutationObserverCbList.forEach(cb => {\n          cb();\n        });\n      });\n      styleMutationObserver.observe(document, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        attributeFilter: [\"style\"]\n      });\n    }\n  }\n  bindCssData(propName, initValue = \"\") {\n    if (!this.__boundCssProps) {\n      this.__boundCssProps = /* @__PURE__ */new Set();\n    }\n    this.__boundCssProps.add(propName);\n    let val = this.getCssData(this.__extractCssName(propName), true);\n    val === null && (val = initValue);\n    this.add(propName, val);\n    this.__initStyleAttrObserver();\n  }\n  dropCssDataCache() {\n    this.__cssDataCache = null;\n    this.__computedStyle = null;\n  }\n  defineAccessor(propName, handler, isAsync) {\n    let localPropName = \"__\" + propName;\n    this[localPropName] = this[propName];\n    Object.defineProperty(this, propName, {\n      set: val => {\n        this[localPropName] = val;\n        if (isAsync) {\n          window.setTimeout(() => {\n            handler == null ? void 0 : handler(val);\n          });\n        } else {\n          handler == null ? void 0 : handler(val);\n        }\n      },\n      get: () => {\n        return this[localPropName];\n      }\n    });\n    this[propName] = this[localPropName];\n  }\n  static set shadowStyles(cssTxt) {\n    let styleBlob = new Blob([cssTxt], {\n      type: \"text/css\"\n    });\n    this.__shadowStylesUrl = URL.createObjectURL(styleBlob);\n  }\n  static set rootStyles(cssTxt) {\n    if (!this.__rootStylesLink) {\n      let styleBlob = new Blob([cssTxt], {\n        type: \"text/css\"\n      });\n      let url = URL.createObjectURL(styleBlob);\n      let link = document.createElement(\"link\");\n      link.href = url;\n      link.rel = \"stylesheet\";\n      this.__rootStylesLink = link;\n    }\n  }\n};\nvar BaseComponent = _BaseComponent;\n__publicField(BaseComponent, \"template\");\n\n// core/AppRouter.js\nvar AppRouter = class {\n  static _print(msg) {\n    console.warn(msg);\n  }\n  static setDefaultTitle(title) {\n    this.defaultTitle = title;\n  }\n  static setRoutingMap(map) {\n    Object.assign(this.appMap, map);\n    for (let route in this.appMap) {\n      if (!this.defaultRoute && this.appMap[route].default === true) {\n        this.defaultRoute = route;\n      } else if (!this.errorRoute && this.appMap[route].error === true) {\n        this.errorRoute = route;\n      }\n    }\n  }\n  static set routingEventName(name) {\n    this.__routingEventName = name;\n  }\n  static get routingEventName() {\n    return this.__routingEventName || \"sym-on-route\";\n  }\n  static readAddressBar() {\n    let result = {\n      route: null,\n      options: {}\n    };\n    let paramsArr = window.location.search.split(this.separator);\n    paramsArr.forEach(part => {\n      if (part.includes(\"?\")) {\n        result.route = part.replace(\"?\", \"\");\n      } else if (part.includes(\"=\")) {\n        let pair = part.split(\"=\");\n        result.options[pair[0]] = decodeURI(pair[1]);\n      } else {\n        result.options[part] = true;\n      }\n    });\n    return result;\n  }\n  static notify() {\n    let routeBase = this.readAddressBar();\n    let routeScheme = this.appMap[routeBase.route];\n    if (routeScheme && routeScheme.title) {\n      document.title = routeScheme.title;\n    }\n    if (routeBase.route === null && this.defaultRoute) {\n      this.applyRoute(this.defaultRoute);\n      return;\n    } else if (!routeScheme && this.errorRoute) {\n      this.applyRoute(this.errorRoute);\n      return;\n    } else if (!routeScheme && this.defaultRoute) {\n      this.applyRoute(this.defaultRoute);\n      return;\n    } else if (!routeScheme) {\n      this._print(`Route \"${routeBase.route}\" not found...`);\n      return;\n    }\n    let event = new CustomEvent(AppRouter.routingEventName, {\n      detail: {\n        route: routeBase.route,\n        options: Object.assign(routeScheme || {}, routeBase.options)\n      }\n    });\n    window.dispatchEvent(event);\n  }\n  static reflect(route, options = {}) {\n    let routeScheme = this.appMap[route];\n    if (!routeScheme) {\n      this._print(\"Wrong route: \" + route);\n      return;\n    }\n    let routeStr = \"?\" + route;\n    for (let prop in options) {\n      if (options[prop] === true) {\n        routeStr += this.separator + prop;\n      } else {\n        routeStr += this.separator + prop + `=${options[prop]}`;\n      }\n    }\n    let title = routeScheme.title || this.defaultTitle || \"\";\n    window.history.pushState(null, title, routeStr);\n    document.title = title;\n  }\n  static applyRoute(route, options = {}) {\n    this.reflect(route, options);\n    this.notify();\n  }\n  static setSeparator(char) {\n    this._separator = char;\n  }\n  static get separator() {\n    return this._separator || \"&\";\n  }\n  static createRouterData(ctxName, routingMap) {\n    this.setRoutingMap(routingMap);\n    let routeData = Data.registerCtx({\n      route: null,\n      options: null,\n      title: null\n    }, ctxName);\n    window.addEventListener(this.routingEventName, e => {\n      var _a;\n      routeData.multiPub({\n        route: e.detail.route,\n        options: e.detail.options,\n        title: ((_a = e.detail.options) == null ? void 0 : _a.title) || this.defaultTitle || \"\"\n      });\n    });\n    AppRouter.notify();\n    this.initPopstateListener();\n    return routeData;\n  }\n  static initPopstateListener() {\n    if (this.__onPopstate) {\n      return;\n    }\n    this.__onPopstate = () => {\n      this.notify();\n    };\n    window.addEventListener(\"popstate\", this.__onPopstate);\n  }\n  static removePopstateListener() {\n    window.removeEventListener(\"popstate\", this.__onPopstate);\n    this.__onPopstate = null;\n  }\n};\nAppRouter.appMap = Object.create(null);\n\n// utils/dom-helpers.js\nfunction applyStyles(el, styleMap) {\n  for (let prop in styleMap) {\n    if (prop.includes(\"-\")) {\n      el.style.setProperty(prop, styleMap[prop]);\n    } else {\n      el.style[prop] = styleMap[prop];\n    }\n  }\n}\nfunction applyAttributes(el, attrMap) {\n  for (let attrName in attrMap) {\n    if (attrMap[attrName].constructor === Boolean) {\n      if (attrMap[attrName]) {\n        el.setAttribute(attrName, \"\");\n      } else {\n        el.removeAttribute(attrName);\n      }\n    } else {\n      el.setAttribute(attrName, attrMap[attrName]);\n    }\n  }\n}\nfunction create(desc = {\n  tag: \"div\"\n}) {\n  let el = document.createElement(desc.tag);\n  if (desc.attributes) {\n    applyAttributes(el, desc.attributes);\n  }\n  if (desc.styles) {\n    applyStyles(el, desc.styles);\n  }\n  if (desc.properties) {\n    for (let prop in desc.properties) {\n      el[prop] = desc.properties[prop];\n    }\n  }\n  if (desc.processors) {\n    desc.processors.forEach(fn => {\n      fn(el);\n    });\n  }\n  if (desc.children) {\n    desc.children.forEach(desc2 => {\n      let child = create(desc2);\n      el.appendChild(child);\n    });\n  }\n  return el;\n}\n\n// utils/IDB.js\nvar READY_EVENT_NAME = \"idb-store-ready\";\nvar DEFAULT_DB_NAME = `symbiote-db`;\nvar UPD_EVENT_PREFIX = `symbiote-idb-update_`;\nvar DbInstance = class {\n  _notifyWhenReady(event = null) {\n    window.dispatchEvent(new CustomEvent(READY_EVENT_NAME, {\n      detail: {\n        dbName: this.name,\n        storeName: this.storeName,\n        event\n      }\n    }));\n  }\n  get _updEventName() {\n    return UPD_EVENT_PREFIX + this.name;\n  }\n  _getUpdateEvent(key) {\n    return new CustomEvent(this._updEventName, {\n      detail: {\n        key: this.name,\n        newValue: key\n      }\n    });\n  }\n  _notifySubscribers(key) {\n    window.localStorage.removeItem(this.name);\n    window.localStorage.setItem(this.name, key);\n    window.dispatchEvent(this._getUpdateEvent(key));\n  }\n  constructor(dbName, storeName) {\n    var _this = this;\n    this.name = dbName;\n    this.storeName = storeName;\n    this.version = 1;\n    this.request = window.indexedDB.open(this.name, this.version);\n    this.request.onupgradeneeded = e => {\n      this.db = e.target[\"result\"];\n      this.objStore = this.db.createObjectStore(storeName, {\n        keyPath: \"_key\"\n      });\n      this.objStore.transaction.oncomplete = ev => {\n        this._notifyWhenReady(ev);\n      };\n    };\n    this.request.onsuccess = e => {\n      this.db = e.target.result;\n      this._notifyWhenReady(e);\n    };\n    this.request.onerror = e => {\n      console.error(e);\n    };\n    this._subscriptionsMap = {};\n    this._updateHandler = e => {\n      if (e.key === this.name && this._subscriptionsMap[e.newValue]) {\n        let set = this._subscriptionsMap[e.newValue];\n        set.forEach( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (callback) {\n            callback(yield _this.read(e.newValue));\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      }\n    };\n    this._localUpdateHandler = e => {\n      this._updateHandler(e.detail);\n    };\n    window.addEventListener(\"storage\", this._updateHandler);\n    window.addEventListener(this._updEventName, this._localUpdateHandler);\n  }\n  read(key) {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).get(key);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = e => {\n        var _a;\n        if ((_a = e.target.result) == null ? void 0 : _a._value) {\n          resolve(e.target.result._value);\n        } else {\n          resolve(null);\n          console.warn(`IDB: cannot read \"${key}\"`);\n        }\n      };\n      request.onerror = e => {\n        reject(e);\n      };\n    });\n  }\n  write(key, value, silent = false) {\n    let data = {\n      _key: key,\n      _value: value\n    };\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).put(data);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = e => {\n        if (!silent) {\n          this._notifySubscribers(key);\n        }\n        resolve(e.target.result);\n      };\n      request.onerror = e => {\n        reject(e);\n      };\n    });\n  }\n  delete(key, silent = false) {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).delete(key);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = e => {\n        if (!silent) {\n          this._notifySubscribers(key);\n        }\n        resolve(e);\n      };\n      request.onerror = e => {\n        reject(e);\n      };\n    });\n  }\n  getAll() {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).getAll();\n    return new Promise((resolve, reject) => {\n      request.onsuccess = e => {\n        let all = e.target.result;\n        resolve(all.map(obj => {\n          return obj._value;\n        }));\n      };\n      request.onerror = e => {\n        reject(e);\n      };\n    });\n  }\n  subscribe(key, callback) {\n    if (!this._subscriptionsMap[key]) {\n      this._subscriptionsMap[key] = /* @__PURE__ */new Set();\n    }\n    let set = this._subscriptionsMap[key];\n    set.add(callback);\n    return {\n      remove: () => {\n        set.delete(callback);\n        if (!set.size) {\n          delete this._subscriptionsMap[key];\n        }\n      }\n    };\n  }\n  stop() {\n    window.removeEventListener(\"storage\", this._updateHandler);\n    this._subscriptionsMap = null;\n    IDB.clear(this.name);\n  }\n};\nvar IDB = class {\n  static get readyEventName() {\n    return READY_EVENT_NAME;\n  }\n  static open(dbName = DEFAULT_DB_NAME, storeName = \"store\") {\n    let key = dbName + \"/\" + storeName;\n    if (!this._reg[key]) {\n      this._reg[key] = new DbInstance(dbName, storeName);\n    }\n    return this._reg[key];\n  }\n  static clear(dbName) {\n    window.indexedDB.deleteDatabase(dbName);\n    for (let key in this._reg) {\n      if (key.split(\"/\")[0] === dbName) {\n        delete this._reg[key];\n      }\n    }\n  }\n};\n__publicField(IDB, \"_reg\", Object.create(null));\nexport { AppRouter, BaseComponent, Data, IDB, UID, applyAttributes, applyStyles, create, kebabToCamel, setNestedProp };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","cloneObj","clone","o","_a","prop","constructor","Data","schema","store","_storeIsProxy","callbackMap","create","warn","actionName","console","read","hasOwnProperty","has","add","val","rewrite","keys","includes","notify","pub","multiPub","updObj","forEach","callback","sub","init","Set","remove","delete","size","registerCtx","uid","Symbol","data","globalStore","get","set","deleteCtx","getCtx","Map","DICT","freeze","BIND_ATTR","ATTR_BIND_PRFX","EXT_DATA_CTX_PRFX","NAMED_DATA_CTX_SPLTR","CTX_NAME_ATTR","CTX_OWNER_ATTR","CSS_CTX_PROP","EL_REF_ATTR","AUTO_TAG_PRFX","REPEAT_ATTR","REPEAT_ITEM_TAG_ATTR","SET_LATER_KEY","USE_TPL","ROOT_STYLE_ATTR_NAME","CHARS","CHLENGTH","length","UID","generate","pattern","i","charAt","Math","random","setNestedProp","parent","path","success","lastStep","propPath","split","step","idx","kebabToCamel","string","map","p","toUpperCase","slice","join","repeatProcessor","fr","fnCtx","querySelectorAll","el","itemTag","getAttribute","itemClass","window","customElements","BaseComponent","style","display","itemTpl","innerHTML","template","reg","firstChild","repeatDataKey","currentList","children","fragment","fillItems","items","item","set$","setTimeout","k","DocumentFragment","repeatItem","assign","init$","appendChild","oversize","exItm","Array","itemKey","push","log","removeAttribute","DEFAULT_SLOT_KEY","slotProcessor","shadowRoot","slots","slotMap","slot","slotName","document","createDocumentFragment","initChildren","child","Element","hasAttribute","values","mapObj","childNodes","parentNode","replaceChild","slotFr","append","refProcessor","refName","ref","domSetProcessor","subStr","keyValArr","attributes","attr","name","startsWith","replace","keyValStr","kv","str","trim","isAttr","indexOf","valKeysArr","valKey","castType","Boolean","setAttribute","OPEN_TOKEN","CLOSE_TOKEN","SKIP_ATTR","getTextNodesWithTokens","node","result","walk","createTreeWalker","NodeFilter","SHOW_TEXT","acceptNode","txt","parentElement","textContent","nextNode","txtNodesProcessor","txtNodes","txtNode","tokenNodes","offset","splitText","nextSibling","tNode","tpl_processors_default","SINGLE_QUOTE","DOUBLE_QUOTE","ESCAPED_PATTERN","hasLeadingTrailingQuotes","trimQuotes","escapeQuotes","prev","next","parseCssPropertyValue","input","output","match","p1","String","fromCodePoint","parseInt","replaceAll","JSON","parse","err","Error","autoTagsCount","styleMutationObserver","styleMutationObserverCbList","_BaseComponent","HTMLElement","dropCssDataCache","__boundCssProps","ctxProp","getCssData","__extractCssName","$","cssInit$","tplProcessors","allSubs","pauseRender","renderShadow","readyToDestroy","processInnerHtml","allowCustomTemplate","ctxOwner","initCallback","__initCallback","__initialized","call","render","shadow","attachShadow","mode","customTplSelector","root","getRootNode","customTpl","querySelector","content","cloneNode","fn","createElement","tpl","addFr","styleLink","rel","href","onload","prepend","addTemplateProcessor","processorFn","autoCtxName","__autoCtxName","setProperty","cssCtxName","ctxName","__cachedCtxName","localCtx","__localCtx","nodeCtx","__parseProp","ctx","pArr","handler","subCb","isConnected","parsed","add$","__stateProxy","Proxy","kvObj","forcePrimitives","primArr","Number","__ctxOwner","__initDataCtx","attrDesc","propArr","propName","namedCtx","cssProp","bindCssData","__dataCtxInitialized","connectedCallback","__disconnectTimeout","clearTimeout","connectedOnce","ctxNameAttrVal","proc","hasLink","is","rootLink","nodeType","Node","DOCUMENT_NODE","head","destroyCallback","disconnectedCallback","updateCssData","disconnect","tagName","isAlias","__tag","registeredClass","define","bindAttributes","desc","observedAttributes","__attrDesc","attributeChangedCallback","oldVal","newVal","$prop","silentCheck","__cssDataCache","__computedStyle","getComputedStyle","getPropertyValue","e","ctxPropName","part","__initStyleAttrObserver","MutationObserver","records","type","cb","observe","childList","subtree","attributeFilter","initValue","defineAccessor","isAsync","localPropName","shadowStyles","cssTxt","styleBlob","Blob","__shadowStylesUrl","URL","createObjectURL","rootStyles","__rootStylesLink","url","link","AppRouter","_print","msg","setDefaultTitle","title","defaultTitle","setRoutingMap","appMap","route","defaultRoute","default","errorRoute","error","routingEventName","__routingEventName","readAddressBar","options","paramsArr","location","search","separator","pair","decodeURI","routeBase","routeScheme","applyRoute","event","CustomEvent","detail","dispatchEvent","reflect","routeStr","history","pushState","setSeparator","char","_separator","createRouterData","routingMap","routeData","addEventListener","initPopstateListener","__onPopstate","removePopstateListener","removeEventListener","applyStyles","styleMap","applyAttributes","attrMap","attrName","tag","styles","properties","processors","desc2","READY_EVENT_NAME","DEFAULT_DB_NAME","UPD_EVENT_PREFIX","DbInstance","_notifyWhenReady","dbName","storeName","_updEventName","_getUpdateEvent","newValue","_notifySubscribers","localStorage","removeItem","setItem","_this","version","request","indexedDB","open","onupgradeneeded","db","target","objStore","createObjectStore","keyPath","transaction","oncomplete","ev","onsuccess","onerror","_subscriptionsMap","_updateHandler","_ref","_asyncToGenerator","_x","apply","arguments","_localUpdateHandler","tx","objectStore","Promise","resolve","reject","_value","write","silent","_key","put","getAll","all","subscribe","stop","IDB","clear","readyEventName","_reg","deleteDatabase"],"sources":["/Users/David/Documents/own_projects/mp4-to-gif/node_modules/@symbiotejs/symbiote/build/symbiote.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// core/Data.js\nfunction cloneObj(obj) {\n  let clone = (o) => {\n    var _a;\n    for (let prop in o) {\n      if (((_a = o[prop]) == null ? void 0 : _a.constructor) === Object) {\n        o[prop] = clone(o[prop]);\n      }\n    }\n    return { ...o };\n  };\n  return clone(obj);\n}\nvar Data = class {\n  constructor(schema) {\n    if (schema.constructor === Object) {\n      this.store = cloneObj(schema);\n    } else {\n      this._storeIsProxy = true;\n      this.store = schema;\n    }\n    this.callbackMap = Object.create(null);\n  }\n  static warn(actionName, prop) {\n    console.warn(`Symbiote Data: cannot ${actionName}. Prop name: ` + prop);\n  }\n  read(prop) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"read\", prop);\n      return null;\n    }\n    return this.store[prop];\n  }\n  has(prop) {\n    return this._storeIsProxy ? this.store[prop] !== void 0 : this.store.hasOwnProperty(prop);\n  }\n  add(prop, val, rewrite = false) {\n    if (!rewrite && Object.keys(this.store).includes(prop)) {\n      return;\n    }\n    this.store[prop] = val;\n    this.notify(prop);\n  }\n  pub(prop, val) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"publish\", prop);\n      return;\n    }\n    this.store[prop] = val;\n    this.notify(prop);\n  }\n  multiPub(updObj) {\n    for (let prop in updObj) {\n      this.pub(prop, updObj[prop]);\n    }\n  }\n  notify(prop) {\n    if (this.callbackMap[prop]) {\n      this.callbackMap[prop].forEach((callback) => {\n        callback(this.store[prop]);\n      });\n    }\n  }\n  sub(prop, callback, init = true) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"subscribe\", prop);\n      return null;\n    }\n    if (!this.callbackMap[prop]) {\n      this.callbackMap[prop] = /* @__PURE__ */ new Set();\n    }\n    this.callbackMap[prop].add(callback);\n    if (init) {\n      callback(this.store[prop]);\n    }\n    return {\n      remove: () => {\n        this.callbackMap[prop].delete(callback);\n        if (!this.callbackMap[prop].size) {\n          delete this.callbackMap[prop];\n        }\n      },\n      callback\n    };\n  }\n  static registerCtx(schema, uid = Symbol()) {\n    let data = Data.globalStore.get(uid);\n    if (data) {\n      console.warn('State: context UID \"' + uid + '\" already in use');\n    } else {\n      data = new Data(schema);\n      Data.globalStore.set(uid, data);\n    }\n    return data;\n  }\n  static deleteCtx(uid) {\n    Data.globalStore.delete(uid);\n  }\n  static getCtx(uid, notify = true) {\n    return Data.globalStore.get(uid) || (notify && console.warn('State: wrong context UID - \"' + uid + '\"'), null);\n  }\n};\nData.globalStore = /* @__PURE__ */ new Map();\n\n// core/dictionary.js\nvar DICT = Object.freeze({\n  BIND_ATTR: \"set\",\n  ATTR_BIND_PRFX: \"@\",\n  EXT_DATA_CTX_PRFX: \"*\",\n  NAMED_DATA_CTX_SPLTR: \"/\",\n  CTX_NAME_ATTR: \"ctx-name\",\n  CTX_OWNER_ATTR: \"ctx-owner\",\n  CSS_CTX_PROP: \"--ctx-name\",\n  EL_REF_ATTR: \"ref\",\n  AUTO_TAG_PRFX: \"sym\",\n  REPEAT_ATTR: \"repeat\",\n  REPEAT_ITEM_TAG_ATTR: \"repeat-item-tag\",\n  SET_LATER_KEY: \"__toSetLater__\",\n  USE_TPL: \"use-template\",\n  ROOT_STYLE_ATTR_NAME: \"sym-component\"\n});\n\n// utils/UID.js\nvar CHARS = \"1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm\";\nvar CHLENGTH = CHARS.length - 1;\nvar UID = class {\n  static generate(pattern = \"XXXXXXXXX-XXX\") {\n    let uid = \"\";\n    for (let i = 0; i < pattern.length; i++) {\n      uid += pattern[i] === \"-\" ? pattern[i] : CHARS.charAt(Math.random() * CHLENGTH);\n    }\n    return uid;\n  }\n};\n\n// utils/setNestedProp.js\nfunction setNestedProp(parent, path, value) {\n  let success = true;\n  let lastStep;\n  let propPath = path.split(\".\");\n  propPath.forEach((step, idx) => {\n    if (idx < propPath.length - 1) {\n      parent = parent[step];\n    } else {\n      lastStep = step;\n    }\n  });\n  if (parent) {\n    parent[lastStep] = value;\n  } else {\n    success = false;\n  }\n  return success;\n}\n\n// utils/kebabToCamel.js\nfunction kebabToCamel(string) {\n  return string.split(\"-\").map((p, i) => {\n    return p && i ? p[0].toUpperCase() + p.slice(1) : p;\n  }).join(\"\").split(\"_\").map((p, i) => {\n    return p && i ? p.toUpperCase() : p;\n  }).join(\"\");\n}\n\n// core/repeatProcessor.js\nfunction repeatProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.REPEAT_ATTR}]`)].forEach((el) => {\n    let itemTag = el.getAttribute(DICT.REPEAT_ITEM_TAG_ATTR);\n    let itemClass;\n    if (itemTag) {\n      itemClass = window.customElements.get(itemTag);\n    }\n    if (!itemClass) {\n      itemClass = class extends fnCtx.BaseComponent {\n        constructor() {\n          super();\n          if (!itemTag) {\n            this.style.display = \"contents\";\n          }\n        }\n      };\n      let itemTpl = el.innerHTML;\n      itemClass.template = itemTpl;\n      itemClass.reg(itemTag);\n    }\n    while (el.firstChild) {\n      el.firstChild.remove();\n    }\n    let repeatDataKey = el.getAttribute(DICT.REPEAT_ATTR);\n    fnCtx.sub(repeatDataKey, (data) => {\n      if (!data) {\n        while (el.firstChild) {\n          el.firstChild.remove();\n        }\n        return;\n      }\n      let currentList = [...el.children];\n      let fragment;\n      let fillItems = (items) => {\n        items.forEach((item, idx) => {\n          if (currentList[idx]) {\n            if (currentList[idx].set$) {\n              setTimeout(() => {\n                currentList[idx].set$(item);\n              });\n            } else {\n              for (let k in item) {\n                currentList[idx][k] = item[k];\n              }\n            }\n          } else {\n            if (!fragment) {\n              fragment = new DocumentFragment();\n            }\n            let repeatItem = new itemClass();\n            Object.assign(repeatItem.init$, item);\n            fragment.appendChild(repeatItem);\n          }\n        });\n        fragment && el.appendChild(fragment);\n        let oversize = currentList.slice(items.length, currentList.length);\n        for (let exItm of oversize) {\n          exItm.remove();\n        }\n      };\n      if (data.constructor === Array) {\n        fillItems(data);\n      } else if (data.constructor === Object) {\n        let items = [];\n        for (let itemKey in data) {\n          let init = data[itemKey];\n          Object.defineProperty(init, \"_KEY_\", {\n            value: itemKey,\n            enumerable: true\n          });\n          items.push(init);\n        }\n        fillItems(items);\n      } else {\n        console.warn(\"Symbiote repeat data type error:\");\n        console.log(data);\n      }\n    });\n    el.removeAttribute(DICT.REPEAT_ATTR);\n    el.removeAttribute(DICT.REPEAT_ITEM_TAG_ATTR);\n  });\n}\n\n// core/tpl-processors.js\nvar DEFAULT_SLOT_KEY = \"__default__\";\nfunction slotProcessor(fr, fnCtx) {\n  if (fnCtx.shadowRoot) {\n    return;\n  }\n  let slots = [...fr.querySelectorAll(\"slot\")];\n  if (!slots.length) {\n    return;\n  }\n  let slotMap = {};\n  slots.forEach((slot) => {\n    let slotName = slot.getAttribute(\"name\") || DEFAULT_SLOT_KEY;\n    slotMap[slotName] = {\n      slot,\n      fr: document.createDocumentFragment()\n    };\n  });\n  fnCtx.initChildren.forEach((child) => {\n    var _a;\n    let slotName = DEFAULT_SLOT_KEY;\n    if (child instanceof Element && child.hasAttribute(\"slot\")) {\n      slotName = child.getAttribute(\"slot\");\n      child.removeAttribute(\"slot\");\n    }\n    (_a = slotMap[slotName]) == null ? void 0 : _a.fr.appendChild(child);\n  });\n  Object.values(slotMap).forEach((mapObj) => {\n    if (mapObj.fr.childNodes.length) {\n      mapObj.slot.parentNode.replaceChild(mapObj.fr, mapObj.slot);\n    } else if (mapObj.slot.childNodes.length) {\n      let slotFr = document.createDocumentFragment();\n      slotFr.append(...mapObj.slot.childNodes);\n      mapObj.slot.parentNode.replaceChild(slotFr, mapObj.slot);\n    } else {\n      mapObj.slot.remove();\n    }\n  });\n}\nfunction refProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.EL_REF_ATTR}]`)].forEach((el) => {\n    let refName = el.getAttribute(DICT.EL_REF_ATTR);\n    fnCtx.ref[refName] = el;\n    el.removeAttribute(DICT.EL_REF_ATTR);\n  });\n}\nfunction domSetProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.BIND_ATTR}]`)].forEach((el) => {\n    let subStr = el.getAttribute(DICT.BIND_ATTR);\n    let keyValArr = subStr.split(\";\");\n    [...el.attributes].forEach((attr) => {\n      if (attr.name.startsWith(\"-\") && attr.value) {\n        let key = kebabToCamel(attr.name.replace(\"-\", \"\"));\n        keyValArr.push(key + \":\" + attr.value);\n        el.removeAttribute(attr.name);\n      }\n    });\n    keyValArr.forEach((keyValStr) => {\n      if (!keyValStr) {\n        return;\n      }\n      let kv = keyValStr.split(\":\").map((str) => str.trim());\n      let prop = kv[0];\n      let isAttr;\n      if (prop.indexOf(DICT.ATTR_BIND_PRFX) === 0) {\n        isAttr = true;\n        prop = prop.replace(DICT.ATTR_BIND_PRFX, \"\");\n      }\n      let valKeysArr = kv[1].split(\",\").map((valKey) => {\n        return valKey.trim();\n      });\n      for (let valKey of valKeysArr) {\n        let castType;\n        if (valKey.startsWith(\"!!\")) {\n          castType = \"double\";\n          valKey = valKey.replace(\"!!\", \"\");\n        } else if (valKey.startsWith(\"!\")) {\n          castType = \"single\";\n          valKey = valKey.replace(\"!\", \"\");\n        }\n        fnCtx.sub(valKey, (val) => {\n          if (castType === \"double\") {\n            val = !!val;\n          } else if (castType === \"single\") {\n            val = !val;\n          }\n          if (isAttr) {\n            if ((val == null ? void 0 : val.constructor) === Boolean) {\n              val ? el.setAttribute(prop, \"\") : el.removeAttribute(prop);\n            } else {\n              el.setAttribute(prop, val);\n            }\n          } else {\n            if (!setNestedProp(el, prop, val)) {\n              if (!el[DICT.SET_LATER_KEY]) {\n                el[DICT.SET_LATER_KEY] = Object.create(null);\n              }\n              el[DICT.SET_LATER_KEY][prop] = val;\n            }\n          }\n        });\n      }\n    });\n    el.removeAttribute(DICT.BIND_ATTR);\n  });\n}\nvar OPEN_TOKEN = \"{{\";\nvar CLOSE_TOKEN = \"}}\";\nvar SKIP_ATTR = \"skip-text\";\nfunction getTextNodesWithTokens(el) {\n  let node;\n  let result = [];\n  let walk = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, {\n    acceptNode: (txt) => {\n      var _a;\n      return !((_a = txt.parentElement) == null ? void 0 : _a.hasAttribute(SKIP_ATTR)) && txt.textContent.includes(OPEN_TOKEN) && txt.textContent.includes(CLOSE_TOKEN) && 1;\n    }\n  });\n  while (node = walk.nextNode()) {\n    result.push(node);\n  }\n  return result;\n}\nvar txtNodesProcessor = function(fr, fnCtx) {\n  let txtNodes = getTextNodesWithTokens(fr);\n  txtNodes.forEach((txtNode) => {\n    let tokenNodes = [];\n    let offset;\n    while (txtNode.textContent.includes(CLOSE_TOKEN)) {\n      if (txtNode.textContent.startsWith(OPEN_TOKEN)) {\n        offset = txtNode.textContent.indexOf(CLOSE_TOKEN) + CLOSE_TOKEN.length;\n        txtNode.splitText(offset);\n        tokenNodes.push(txtNode);\n      } else {\n        offset = txtNode.textContent.indexOf(OPEN_TOKEN);\n        txtNode.splitText(offset);\n      }\n      txtNode = txtNode.nextSibling;\n    }\n    tokenNodes.forEach((tNode) => {\n      let prop = tNode.textContent.replace(OPEN_TOKEN, \"\").replace(CLOSE_TOKEN, \"\");\n      tNode.textContent = \"\";\n      fnCtx.sub(prop, (val) => {\n        tNode.textContent = val;\n      });\n    });\n  });\n};\nvar tpl_processors_default = [repeatProcessor, slotProcessor, refProcessor, domSetProcessor, txtNodesProcessor];\n\n// utils/parseCssPropertyValue.js\nvar SINGLE_QUOTE = \"'\";\nvar DOUBLE_QUOTE = '\"';\nvar ESCAPED_PATTERN = /\\\\([0-9a-fA-F]{1,6} ?)/g;\nfunction hasLeadingTrailingQuotes(str) {\n  return (str[0] === DOUBLE_QUOTE || str[0] === SINGLE_QUOTE) && (str[str.length - 1] === DOUBLE_QUOTE || str[str.length - 1] === SINGLE_QUOTE);\n}\nfunction trimQuotes(str) {\n  if (str[0] === DOUBLE_QUOTE || str[0] === SINGLE_QUOTE) {\n    str = str.slice(1);\n  }\n  if (str[str.length - 1] === DOUBLE_QUOTE || str[str.length - 1] === SINGLE_QUOTE) {\n    str = str.slice(0, -1);\n  }\n  return str;\n}\nfunction escapeQuotes(str) {\n  let result = \"\";\n  let prev = \"\";\n  for (var i = 0; i < str.length; i++) {\n    const next = str[i + 1];\n    if (str[i] === \"\\\\\" && next === '\"') {\n      result += '\\\\\"';\n      i++;\n    } else if (str[i] === '\"' && prev !== \"\\\\\") {\n      result += '\\\\\"';\n    } else {\n      result += str[i];\n    }\n    prev = str[i];\n  }\n  return result;\n}\nfunction parseCssPropertyValue(input) {\n  let output = input;\n  if (hasLeadingTrailingQuotes(input)) {\n    output = trimQuotes(output);\n    output = output.replace(ESCAPED_PATTERN, (match, p1) => {\n      return String.fromCodePoint(parseInt(p1.trim(), 16));\n    });\n    output = output.replaceAll(\"\\\\\\n\", \"\\\\n\");\n    output = escapeQuotes(output);\n    output = DOUBLE_QUOTE + output + DOUBLE_QUOTE;\n  }\n  try {\n    return JSON.parse(output);\n  } catch (err) {\n    throw new Error(`Failed to parse CSS property value: ${output}. Original input: ${input}`);\n  }\n}\n\n// core/BaseComponent.js\nvar autoTagsCount = 0;\nvar styleMutationObserver = null;\nvar styleMutationObserverCbList = null;\nvar _BaseComponent = class extends HTMLElement {\n  constructor() {\n    super();\n    __publicField(this, \"updateCssData\", () => {\n      var _a;\n      this.dropCssDataCache();\n      (_a = this.__boundCssProps) == null ? void 0 : _a.forEach((ctxProp) => {\n        let val = this.getCssData(this.__extractCssName(ctxProp), true);\n        val !== null && this.$[ctxProp] !== val && (this.$[ctxProp] = val);\n      });\n    });\n    this.init$ = Object.create(null);\n    this.cssInit$ = Object.create(null);\n    this.tplProcessors = /* @__PURE__ */ new Set();\n    this.ref = Object.create(null);\n    this.allSubs = /* @__PURE__ */ new Set();\n    this.pauseRender = false;\n    this.renderShadow = false;\n    this.readyToDestroy = true;\n    this.processInnerHtml = false;\n    this.allowCustomTemplate = false;\n    this.ctxOwner = false;\n  }\n  get BaseComponent() {\n    return _BaseComponent;\n  }\n  initCallback() {\n  }\n  __initCallback() {\n    var _a;\n    if (this.__initialized) {\n      return;\n    }\n    this.__initialized = true;\n    (_a = this.initCallback) == null ? void 0 : _a.call(this);\n  }\n  render(template, shadow = this.renderShadow) {\n    let fr;\n    if ((shadow || this.constructor[\"__shadowStylesUrl\"]) && !this.shadowRoot) {\n      this.attachShadow({\n        mode: \"open\"\n      });\n    }\n    if (this.allowCustomTemplate) {\n      let customTplSelector = this.getAttribute(DICT.USE_TPL);\n      if (customTplSelector) {\n        let root = this.getRootNode();\n        let customTpl = (root == null ? void 0 : root.querySelector(customTplSelector)) || document.querySelector(customTplSelector);\n        if (customTpl) {\n          template = customTpl.content.cloneNode(true);\n        } else {\n          console.warn(`Symbiote template \"${customTplSelector}\" is not found...`);\n        }\n      }\n    }\n    if (this.processInnerHtml) {\n      for (let fn of this.tplProcessors) {\n        fn(this, this);\n      }\n    }\n    if (template || this.constructor[\"template\"]) {\n      if (this.constructor[\"template\"] && !this.constructor[\"__tpl\"]) {\n        this.constructor[\"__tpl\"] = document.createElement(\"template\");\n        this.constructor[\"__tpl\"].innerHTML = this.constructor[\"template\"];\n      }\n      if ((template == null ? void 0 : template.constructor) === DocumentFragment) {\n        fr = template;\n      } else if ((template == null ? void 0 : template.constructor) === String) {\n        let tpl = document.createElement(\"template\");\n        tpl.innerHTML = template;\n        fr = tpl.content.cloneNode(true);\n      } else if (this.constructor[\"__tpl\"]) {\n        fr = this.constructor[\"__tpl\"].content.cloneNode(true);\n      }\n      for (let fn of this.tplProcessors) {\n        fn(fr, this);\n      }\n    }\n    let addFr = () => {\n      fr && (shadow && this.shadowRoot.appendChild(fr) || this.appendChild(fr));\n      this.__initCallback();\n    };\n    if (this.constructor[\"__shadowStylesUrl\"]) {\n      shadow = true;\n      let styleLink = document.createElement(\"link\");\n      styleLink.rel = \"stylesheet\";\n      styleLink.href = this.constructor[\"__shadowStylesUrl\"];\n      styleLink.onload = addFr;\n      this.shadowRoot.prepend(styleLink);\n    } else {\n      addFr();\n    }\n  }\n  addTemplateProcessor(processorFn) {\n    this.tplProcessors.add(processorFn);\n  }\n  get autoCtxName() {\n    if (!this.__autoCtxName) {\n      this.__autoCtxName = UID.generate();\n      this.style.setProperty(DICT.CSS_CTX_PROP, `'${this.__autoCtxName}'`);\n    }\n    return this.__autoCtxName;\n  }\n  get cssCtxName() {\n    return this.getCssData(DICT.CSS_CTX_PROP, true);\n  }\n  get ctxName() {\n    var _a;\n    let ctxName = ((_a = this.getAttribute(DICT.CTX_NAME_ATTR)) == null ? void 0 : _a.trim()) || this.cssCtxName || this.__cachedCtxName || this.autoCtxName;\n    this.__cachedCtxName = ctxName;\n    return ctxName;\n  }\n  get localCtx() {\n    if (!this.__localCtx) {\n      this.__localCtx = Data.registerCtx({}, this);\n    }\n    return this.__localCtx;\n  }\n  get nodeCtx() {\n    return Data.getCtx(this.ctxName, false) || Data.registerCtx({}, this.ctxName);\n  }\n  static __parseProp(prop, fnCtx) {\n    let ctx;\n    let name;\n    if (prop.startsWith(DICT.EXT_DATA_CTX_PRFX)) {\n      ctx = fnCtx.nodeCtx;\n      name = prop.replace(DICT.EXT_DATA_CTX_PRFX, \"\");\n    } else if (prop.includes(DICT.NAMED_DATA_CTX_SPLTR)) {\n      let pArr = prop.split(DICT.NAMED_DATA_CTX_SPLTR);\n      ctx = Data.getCtx(pArr[0]);\n      name = pArr[1];\n    } else {\n      ctx = fnCtx.localCtx;\n      name = prop;\n    }\n    return {\n      ctx,\n      name\n    };\n  }\n  sub(prop, handler, init = true) {\n    let subCb = (val) => {\n      if (!this.isConnected) {\n        return;\n      }\n      handler(val);\n    };\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    if (!parsed.ctx.has(parsed.name)) {\n      window.setTimeout(() => {\n        this.allSubs.add(parsed.ctx.sub(parsed.name, subCb, init));\n      });\n    } else {\n      this.allSubs.add(parsed.ctx.sub(parsed.name, subCb, init));\n    }\n  }\n  notify(prop) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    parsed.ctx.notify(parsed.name);\n  }\n  has(prop) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    return parsed.ctx.has(parsed.name);\n  }\n  add(prop, val, rewrite = false) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    parsed.ctx.add(parsed.name, val, rewrite);\n  }\n  add$(obj, rewrite = false) {\n    for (let prop in obj) {\n      this.add(prop, obj[prop], rewrite);\n    }\n  }\n  get $() {\n    if (!this.__stateProxy) {\n      let o = Object.create(null);\n      this.__stateProxy = new Proxy(o, {\n        set: (obj, prop, val) => {\n          let parsed = _BaseComponent.__parseProp(prop, this);\n          parsed.ctx.pub(parsed.name, val);\n          return true;\n        },\n        get: (obj, prop) => {\n          let parsed = _BaseComponent.__parseProp(prop, this);\n          return parsed.ctx.read(parsed.name);\n        }\n      });\n    }\n    return this.__stateProxy;\n  }\n  set$(kvObj, forcePrimitives = false) {\n    for (let key in kvObj) {\n      let val = kvObj[key];\n      let primArr = [String, Number, Boolean];\n      if (forcePrimitives || !primArr.includes(val == null ? void 0 : val.constructor)) {\n        this.$[key] = val;\n      } else {\n        this.$[key] !== val && (this.$[key] = val);\n      }\n    }\n  }\n  get __ctxOwner() {\n    return this.ctxOwner || this.hasAttribute(DICT.CTX_OWNER_ATTR) && this.getAttribute(DICT.CTX_OWNER_ATTR) !== \"false\";\n  }\n  __initDataCtx() {\n    let attrDesc = this.constructor[\"__attrDesc\"];\n    if (attrDesc) {\n      for (let prop of Object.values(attrDesc)) {\n        if (!Object.keys(this.init$).includes(prop)) {\n          this.init$[prop] = \"\";\n        }\n      }\n    }\n    for (let prop in this.init$) {\n      if (prop.startsWith(DICT.EXT_DATA_CTX_PRFX)) {\n        this.nodeCtx.add(prop.replace(DICT.EXT_DATA_CTX_PRFX, \"\"), this.init$[prop], this.__ctxOwner);\n      } else if (prop.includes(DICT.NAMED_DATA_CTX_SPLTR)) {\n        let propArr = prop.split(DICT.NAMED_DATA_CTX_SPLTR);\n        let ctxName = propArr[0].trim();\n        let propName = propArr[1].trim();\n        if (ctxName && propName) {\n          let namedCtx = Data.getCtx(ctxName, false);\n          if (!namedCtx) {\n            namedCtx = Data.registerCtx({}, ctxName);\n          }\n          namedCtx.add(propName, this.init$[prop]);\n        }\n      } else {\n        this.localCtx.add(prop, this.init$[prop]);\n      }\n    }\n    for (let cssProp in this.cssInit$) {\n      this.bindCssData(cssProp, this.cssInit$[cssProp]);\n    }\n    this.__dataCtxInitialized = true;\n  }\n  connectedCallback() {\n    var _a;\n    if (!this.isConnected) {\n      return;\n    }\n    if (this.__disconnectTimeout) {\n      window.clearTimeout(this.__disconnectTimeout);\n    }\n    if (!this.connectedOnce) {\n      let ctxNameAttrVal = (_a = this.getAttribute(DICT.CTX_NAME_ATTR)) == null ? void 0 : _a.trim();\n      if (ctxNameAttrVal) {\n        this.style.setProperty(DICT.CSS_CTX_PROP, `'${ctxNameAttrVal}'`);\n      }\n      this.__initDataCtx();\n      if (this[DICT.SET_LATER_KEY]) {\n        for (let prop in this[DICT.SET_LATER_KEY]) {\n          setNestedProp(this, prop, this[DICT.SET_LATER_KEY][prop]);\n        }\n        delete this[DICT.SET_LATER_KEY];\n      }\n      this.initChildren = [...this.childNodes];\n      for (let proc of tpl_processors_default) {\n        this.addTemplateProcessor(proc);\n      }\n      if (this.pauseRender) {\n        this.__initCallback();\n      } else {\n        if (this.constructor[\"__rootStylesLink\"]) {\n          let root = this.getRootNode();\n          if (!root) {\n            return;\n          }\n          let hasLink = root == null ? void 0 : root.querySelector(`link[${DICT.ROOT_STYLE_ATTR_NAME}=\"${this.constructor.is}\"]`);\n          if (hasLink) {\n            this.render();\n            return;\n          }\n          let rootLink = this.constructor[\"__rootStylesLink\"].cloneNode(true);\n          rootLink.setAttribute(DICT.ROOT_STYLE_ATTR_NAME, this.constructor[\"is\"]);\n          rootLink.onload = () => {\n            this.render();\n          };\n          root.nodeType === Node.DOCUMENT_NODE ? root.head.appendChild(rootLink) : root.prepend(rootLink);\n        } else {\n          this.render();\n        }\n      }\n    }\n    this.connectedOnce = true;\n  }\n  destroyCallback() {\n  }\n  disconnectedCallback() {\n    if (!this.connectedOnce) {\n      return;\n    }\n    this.dropCssDataCache();\n    if (!this.readyToDestroy) {\n      return;\n    }\n    if (this.__disconnectTimeout) {\n      window.clearTimeout(this.__disconnectTimeout);\n    }\n    this.__disconnectTimeout = window.setTimeout(() => {\n      this.destroyCallback();\n      for (let sub of this.allSubs) {\n        sub.remove();\n        this.allSubs.delete(sub);\n      }\n      for (let proc of this.tplProcessors) {\n        this.tplProcessors.delete(proc);\n      }\n      styleMutationObserverCbList == null ? void 0 : styleMutationObserverCbList.delete(this.updateCssData);\n      if (!(styleMutationObserverCbList == null ? void 0 : styleMutationObserverCbList.size)) {\n        styleMutationObserver == null ? void 0 : styleMutationObserver.disconnect();\n        styleMutationObserver = null;\n        styleMutationObserverCbList = null;\n      }\n    }, 100);\n  }\n  static reg(tagName, isAlias = false) {\n    if (!tagName) {\n      autoTagsCount++;\n      tagName = `${DICT.AUTO_TAG_PRFX}-${autoTagsCount}`;\n    }\n    this.__tag = tagName;\n    let registeredClass = window.customElements.get(tagName);\n    if (registeredClass) {\n      if (!isAlias && registeredClass !== this) {\n        console.warn([\n          `Element with tag name \"${tagName}\" already registered.`,\n          `You're trying to override it with another class \"${this.name}\".`,\n          `This is most likely a mistake.`,\n          `New element will not be registered.`\n        ].join(\"\\n\"));\n      }\n      return;\n    }\n    window.customElements.define(tagName, isAlias ? class extends this {\n    } : this);\n  }\n  static get is() {\n    if (!this.__tag) {\n      this.reg();\n    }\n    return this.__tag;\n  }\n  static bindAttributes(desc) {\n    this.observedAttributes = Object.keys(desc);\n    this.__attrDesc = desc;\n  }\n  attributeChangedCallback(name, oldVal, newVal) {\n    var _a;\n    if (oldVal === newVal) {\n      return;\n    }\n    let $prop = (_a = this.constructor[\"__attrDesc\"]) == null ? void 0 : _a[name];\n    if ($prop) {\n      if (this.__dataCtxInitialized) {\n        this.$[$prop] = newVal;\n      } else {\n        this.init$[$prop] = newVal;\n      }\n    } else {\n      this[name] = newVal;\n    }\n  }\n  getCssData(propName, silentCheck = false) {\n    if (!this.__cssDataCache) {\n      this.__cssDataCache = Object.create(null);\n    }\n    if (!Object.keys(this.__cssDataCache).includes(propName)) {\n      if (!this.__computedStyle) {\n        this.__computedStyle = window.getComputedStyle(this);\n      }\n      let val = this.__computedStyle.getPropertyValue(propName).trim();\n      try {\n        this.__cssDataCache[propName] = parseCssPropertyValue(val);\n      } catch (e) {\n        !silentCheck && console.warn(`CSS Data error: ${propName}`);\n        this.__cssDataCache[propName] = null;\n      }\n    }\n    return this.__cssDataCache[propName];\n  }\n  __extractCssName(ctxPropName) {\n    return ctxPropName.split(\"--\").map((part, idx) => {\n      return idx === 0 ? \"\" : part;\n    }).join(\"--\");\n  }\n  __initStyleAttrObserver() {\n    if (!styleMutationObserverCbList) {\n      styleMutationObserverCbList = /* @__PURE__ */ new Set();\n    }\n    styleMutationObserverCbList.add(this.updateCssData);\n    if (!styleMutationObserver) {\n      styleMutationObserver = new MutationObserver((records) => {\n        records[0].type === \"attributes\" && styleMutationObserverCbList.forEach((cb) => {\n          cb();\n        });\n      });\n      styleMutationObserver.observe(document, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        attributeFilter: [\"style\"]\n      });\n    }\n  }\n  bindCssData(propName, initValue = \"\") {\n    if (!this.__boundCssProps) {\n      this.__boundCssProps = /* @__PURE__ */ new Set();\n    }\n    this.__boundCssProps.add(propName);\n    let val = this.getCssData(this.__extractCssName(propName), true);\n    val === null && (val = initValue);\n    this.add(propName, val);\n    this.__initStyleAttrObserver();\n  }\n  dropCssDataCache() {\n    this.__cssDataCache = null;\n    this.__computedStyle = null;\n  }\n  defineAccessor(propName, handler, isAsync) {\n    let localPropName = \"__\" + propName;\n    this[localPropName] = this[propName];\n    Object.defineProperty(this, propName, {\n      set: (val) => {\n        this[localPropName] = val;\n        if (isAsync) {\n          window.setTimeout(() => {\n            handler == null ? void 0 : handler(val);\n          });\n        } else {\n          handler == null ? void 0 : handler(val);\n        }\n      },\n      get: () => {\n        return this[localPropName];\n      }\n    });\n    this[propName] = this[localPropName];\n  }\n  static set shadowStyles(cssTxt) {\n    let styleBlob = new Blob([cssTxt], {\n      type: \"text/css\"\n    });\n    this.__shadowStylesUrl = URL.createObjectURL(styleBlob);\n  }\n  static set rootStyles(cssTxt) {\n    if (!this.__rootStylesLink) {\n      let styleBlob = new Blob([cssTxt], {\n        type: \"text/css\"\n      });\n      let url = URL.createObjectURL(styleBlob);\n      let link = document.createElement(\"link\");\n      link.href = url;\n      link.rel = \"stylesheet\";\n      this.__rootStylesLink = link;\n    }\n  }\n};\nvar BaseComponent = _BaseComponent;\n__publicField(BaseComponent, \"template\");\n\n// core/AppRouter.js\nvar AppRouter = class {\n  static _print(msg) {\n    console.warn(msg);\n  }\n  static setDefaultTitle(title) {\n    this.defaultTitle = title;\n  }\n  static setRoutingMap(map) {\n    Object.assign(this.appMap, map);\n    for (let route in this.appMap) {\n      if (!this.defaultRoute && this.appMap[route].default === true) {\n        this.defaultRoute = route;\n      } else if (!this.errorRoute && this.appMap[route].error === true) {\n        this.errorRoute = route;\n      }\n    }\n  }\n  static set routingEventName(name) {\n    this.__routingEventName = name;\n  }\n  static get routingEventName() {\n    return this.__routingEventName || \"sym-on-route\";\n  }\n  static readAddressBar() {\n    let result = {\n      route: null,\n      options: {}\n    };\n    let paramsArr = window.location.search.split(this.separator);\n    paramsArr.forEach((part) => {\n      if (part.includes(\"?\")) {\n        result.route = part.replace(\"?\", \"\");\n      } else if (part.includes(\"=\")) {\n        let pair = part.split(\"=\");\n        result.options[pair[0]] = decodeURI(pair[1]);\n      } else {\n        result.options[part] = true;\n      }\n    });\n    return result;\n  }\n  static notify() {\n    let routeBase = this.readAddressBar();\n    let routeScheme = this.appMap[routeBase.route];\n    if (routeScheme && routeScheme.title) {\n      document.title = routeScheme.title;\n    }\n    if (routeBase.route === null && this.defaultRoute) {\n      this.applyRoute(this.defaultRoute);\n      return;\n    } else if (!routeScheme && this.errorRoute) {\n      this.applyRoute(this.errorRoute);\n      return;\n    } else if (!routeScheme && this.defaultRoute) {\n      this.applyRoute(this.defaultRoute);\n      return;\n    } else if (!routeScheme) {\n      this._print(`Route \"${routeBase.route}\" not found...`);\n      return;\n    }\n    let event = new CustomEvent(AppRouter.routingEventName, {\n      detail: {\n        route: routeBase.route,\n        options: Object.assign(routeScheme || {}, routeBase.options)\n      }\n    });\n    window.dispatchEvent(event);\n  }\n  static reflect(route, options = {}) {\n    let routeScheme = this.appMap[route];\n    if (!routeScheme) {\n      this._print(\"Wrong route: \" + route);\n      return;\n    }\n    let routeStr = \"?\" + route;\n    for (let prop in options) {\n      if (options[prop] === true) {\n        routeStr += this.separator + prop;\n      } else {\n        routeStr += this.separator + prop + `=${options[prop]}`;\n      }\n    }\n    let title = routeScheme.title || this.defaultTitle || \"\";\n    window.history.pushState(null, title, routeStr);\n    document.title = title;\n  }\n  static applyRoute(route, options = {}) {\n    this.reflect(route, options);\n    this.notify();\n  }\n  static setSeparator(char) {\n    this._separator = char;\n  }\n  static get separator() {\n    return this._separator || \"&\";\n  }\n  static createRouterData(ctxName, routingMap) {\n    this.setRoutingMap(routingMap);\n    let routeData = Data.registerCtx({\n      route: null,\n      options: null,\n      title: null\n    }, ctxName);\n    window.addEventListener(this.routingEventName, (e) => {\n      var _a;\n      routeData.multiPub({\n        route: e.detail.route,\n        options: e.detail.options,\n        title: ((_a = e.detail.options) == null ? void 0 : _a.title) || this.defaultTitle || \"\"\n      });\n    });\n    AppRouter.notify();\n    this.initPopstateListener();\n    return routeData;\n  }\n  static initPopstateListener() {\n    if (this.__onPopstate) {\n      return;\n    }\n    this.__onPopstate = () => {\n      this.notify();\n    };\n    window.addEventListener(\"popstate\", this.__onPopstate);\n  }\n  static removePopstateListener() {\n    window.removeEventListener(\"popstate\", this.__onPopstate);\n    this.__onPopstate = null;\n  }\n};\nAppRouter.appMap = Object.create(null);\n\n// utils/dom-helpers.js\nfunction applyStyles(el, styleMap) {\n  for (let prop in styleMap) {\n    if (prop.includes(\"-\")) {\n      el.style.setProperty(prop, styleMap[prop]);\n    } else {\n      el.style[prop] = styleMap[prop];\n    }\n  }\n}\nfunction applyAttributes(el, attrMap) {\n  for (let attrName in attrMap) {\n    if (attrMap[attrName].constructor === Boolean) {\n      if (attrMap[attrName]) {\n        el.setAttribute(attrName, \"\");\n      } else {\n        el.removeAttribute(attrName);\n      }\n    } else {\n      el.setAttribute(attrName, attrMap[attrName]);\n    }\n  }\n}\nfunction create(desc = { tag: \"div\" }) {\n  let el = document.createElement(desc.tag);\n  if (desc.attributes) {\n    applyAttributes(el, desc.attributes);\n  }\n  if (desc.styles) {\n    applyStyles(el, desc.styles);\n  }\n  if (desc.properties) {\n    for (let prop in desc.properties) {\n      el[prop] = desc.properties[prop];\n    }\n  }\n  if (desc.processors) {\n    desc.processors.forEach((fn) => {\n      fn(el);\n    });\n  }\n  if (desc.children) {\n    desc.children.forEach((desc2) => {\n      let child = create(desc2);\n      el.appendChild(child);\n    });\n  }\n  return el;\n}\n\n// utils/IDB.js\nvar READY_EVENT_NAME = \"idb-store-ready\";\nvar DEFAULT_DB_NAME = `symbiote-db`;\nvar UPD_EVENT_PREFIX = `symbiote-idb-update_`;\nvar DbInstance = class {\n  _notifyWhenReady(event = null) {\n    window.dispatchEvent(new CustomEvent(READY_EVENT_NAME, {\n      detail: {\n        dbName: this.name,\n        storeName: this.storeName,\n        event\n      }\n    }));\n  }\n  get _updEventName() {\n    return UPD_EVENT_PREFIX + this.name;\n  }\n  _getUpdateEvent(key) {\n    return new CustomEvent(this._updEventName, {\n      detail: {\n        key: this.name,\n        newValue: key\n      }\n    });\n  }\n  _notifySubscribers(key) {\n    window.localStorage.removeItem(this.name);\n    window.localStorage.setItem(this.name, key);\n    window.dispatchEvent(this._getUpdateEvent(key));\n  }\n  constructor(dbName, storeName) {\n    this.name = dbName;\n    this.storeName = storeName;\n    this.version = 1;\n    this.request = window.indexedDB.open(this.name, this.version);\n    this.request.onupgradeneeded = (e) => {\n      this.db = e.target[\"result\"];\n      this.objStore = this.db.createObjectStore(storeName, {\n        keyPath: \"_key\"\n      });\n      this.objStore.transaction.oncomplete = (ev) => {\n        this._notifyWhenReady(ev);\n      };\n    };\n    this.request.onsuccess = (e) => {\n      this.db = e.target.result;\n      this._notifyWhenReady(e);\n    };\n    this.request.onerror = (e) => {\n      console.error(e);\n    };\n    this._subscriptionsMap = {};\n    this._updateHandler = (e) => {\n      if (e.key === this.name && this._subscriptionsMap[e.newValue]) {\n        let set = this._subscriptionsMap[e.newValue];\n        set.forEach(async (callback) => {\n          callback(await this.read(e.newValue));\n        });\n      }\n    };\n    this._localUpdateHandler = (e) => {\n      this._updateHandler(e.detail);\n    };\n    window.addEventListener(\"storage\", this._updateHandler);\n    window.addEventListener(this._updEventName, this._localUpdateHandler);\n  }\n  read(key) {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).get(key);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        var _a;\n        if ((_a = e.target.result) == null ? void 0 : _a._value) {\n          resolve(e.target.result._value);\n        } else {\n          resolve(null);\n          console.warn(`IDB: cannot read \"${key}\"`);\n        }\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  write(key, value, silent = false) {\n    let data = {\n      _key: key,\n      _value: value\n    };\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).put(data);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        if (!silent) {\n          this._notifySubscribers(key);\n        }\n        resolve(e.target.result);\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  delete(key, silent = false) {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).delete(key);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        if (!silent) {\n          this._notifySubscribers(key);\n        }\n        resolve(e);\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  getAll() {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).getAll();\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        let all = e.target.result;\n        resolve(all.map((obj) => {\n          return obj._value;\n        }));\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  subscribe(key, callback) {\n    if (!this._subscriptionsMap[key]) {\n      this._subscriptionsMap[key] = /* @__PURE__ */ new Set();\n    }\n    let set = this._subscriptionsMap[key];\n    set.add(callback);\n    return {\n      remove: () => {\n        set.delete(callback);\n        if (!set.size) {\n          delete this._subscriptionsMap[key];\n        }\n      }\n    };\n  }\n  stop() {\n    window.removeEventListener(\"storage\", this._updateHandler);\n    this._subscriptionsMap = null;\n    IDB.clear(this.name);\n  }\n};\nvar IDB = class {\n  static get readyEventName() {\n    return READY_EVENT_NAME;\n  }\n  static open(dbName = DEFAULT_DB_NAME, storeName = \"store\") {\n    let key = dbName + \"/\" + storeName;\n    if (!this._reg[key]) {\n      this._reg[key] = new DbInstance(dbName, storeName);\n    }\n    return this._reg[key];\n  }\n  static clear(dbName) {\n    window.indexedDB.deleteDatabase(dbName);\n    for (let key in this._reg) {\n      if (key.split(\"/\")[0] === dbName) {\n        delete this._reg[key];\n      }\n    }\n  }\n};\n__publicField(IDB, \"_reg\", Object.create(null));\nexport {\n  AppRouter,\n  BaseComponent,\n  Data,\n  IDB,\n  UID,\n  applyAttributes,\n  applyStyles,\n  create,\n  kebabToCamel,\n  setNestedProp\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}