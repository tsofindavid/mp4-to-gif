{"ast":null,"code":"import { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nconst L10N_PREFIX = 'src-type-';\nexport class SourceBtn extends UploaderBlock {\n  /** @private */\n  _registeredTypes = {};\n  init$ = {\n    ...this.init$,\n    iconName: 'default'\n  };\n  initTypes() {\n    this.registerType({\n      type: UploaderBlock.sourceTypes.LOCAL,\n      onClick: () => {\n        this.openSystemDialog();\n      }\n    });\n    this.registerType({\n      type: UploaderBlock.sourceTypes.URL,\n      activity: ActivityBlock.activities.URL,\n      textKey: 'from-url'\n    });\n    this.registerType({\n      type: UploaderBlock.sourceTypes.CAMERA,\n      activity: ActivityBlock.activities.CAMERA,\n      onClick: () => {\n        let el = document.createElement('input');\n        var supportsCapture = el.capture !== undefined;\n        if (supportsCapture) {\n          this.openSystemDialog({\n            captureCamera: true\n          });\n        }\n        return !supportsCapture;\n      }\n    });\n    this.registerType({\n      type: 'draw',\n      activity: ActivityBlock.activities.DRAW,\n      icon: 'edit-draw'\n    });\n    for (let externalSourceType of Object.values(UploaderBlock.extSrcList)) {\n      this.registerType({\n        type: externalSourceType,\n        activity: ActivityBlock.activities.EXTERNAL,\n        activityParams: {\n          externalSourceType: externalSourceType\n        }\n      });\n    }\n  }\n  initCallback() {\n    super.initCallback();\n    this.initTypes();\n    this.setAttribute('role', 'button');\n    this.defineAccessor('type', val => {\n      if (!val) {\n        return;\n      }\n      this.applyType(val);\n    });\n  }\n  registerType(typeConfig) {\n    this._registeredTypes[typeConfig.type] = typeConfig;\n  }\n  getType(type) {\n    return this._registeredTypes[type];\n  }\n  applyType(type) {\n    const configType = this._registeredTypes[type];\n    if (!configType) {\n      console.warn('Unsupported source type: ' + type);\n      return;\n    }\n    const {\n      textKey = type,\n      icon = type,\n      activity,\n      onClick,\n      activityParams = {}\n    } = configType;\n    this.applyL10nKey('src-type', `${L10N_PREFIX}${textKey}`);\n    this.$.iconName = icon;\n    this.onclick = e => {\n      const showActivity = onClick ? onClick(e) : !!activity;\n      showActivity && this.set$({\n        '*currentActivityParams': activityParams,\n        '*currentActivity': activity\n      });\n    };\n  }\n}\nSourceBtn.template = /* HTML */`\n  <lr-icon set=\"@name: iconName\"></lr-icon>\n  <div class=\"txt\" l10n=\"src-type\"></div>\n`;\nSourceBtn.bindAttributes({\n  type: null\n});","map":{"version":3,"names":["UploaderBlock","ActivityBlock","L10N_PREFIX","SourceBtn","_registeredTypes","init$","iconName","initTypes","registerType","type","sourceTypes","LOCAL","onClick","openSystemDialog","URL","activity","activities","textKey","CAMERA","el","document","createElement","supportsCapture","capture","undefined","captureCamera","DRAW","icon","externalSourceType","Object","values","extSrcList","EXTERNAL","activityParams","initCallback","setAttribute","defineAccessor","val","applyType","typeConfig","getType","configType","console","warn","applyL10nKey","$","onclick","e","showActivity","set$","template","bindAttributes"],"sources":["/Users/David/Documents/own_projects/mp4-to-gif/node_modules/@uploadcare/blocks/blocks/SourceBtn/SourceBtn.js"],"sourcesContent":["import { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\n\nconst L10N_PREFIX = 'src-type-';\n\nexport class SourceBtn extends UploaderBlock {\n  /** @private */\n  _registeredTypes = {};\n\n  init$ = {\n    ...this.init$,\n    iconName: 'default',\n  };\n\n  initTypes() {\n    this.registerType({\n      type: UploaderBlock.sourceTypes.LOCAL,\n      onClick: () => {\n        this.openSystemDialog();\n      },\n    });\n    this.registerType({\n      type: UploaderBlock.sourceTypes.URL,\n      activity: ActivityBlock.activities.URL,\n      textKey: 'from-url',\n    });\n    this.registerType({\n      type: UploaderBlock.sourceTypes.CAMERA,\n      activity: ActivityBlock.activities.CAMERA,\n      onClick: () => {\n        let el = document.createElement('input');\n        var supportsCapture = el.capture !== undefined;\n        if (supportsCapture) {\n          this.openSystemDialog({ captureCamera: true });\n        }\n        return !supportsCapture;\n      },\n    });\n    this.registerType({\n      type: 'draw',\n      activity: ActivityBlock.activities.DRAW,\n      icon: 'edit-draw',\n    });\n\n    for (let externalSourceType of Object.values(UploaderBlock.extSrcList)) {\n      this.registerType({\n        type: externalSourceType,\n        activity: ActivityBlock.activities.EXTERNAL,\n        activityParams: {\n          externalSourceType: externalSourceType,\n        },\n      });\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n    this.initTypes();\n\n    this.setAttribute('role', 'button');\n    this.defineAccessor('type', (val) => {\n      if (!val) {\n        return;\n      }\n      this.applyType(val);\n    });\n  }\n\n  registerType(typeConfig) {\n    this._registeredTypes[typeConfig.type] = typeConfig;\n  }\n\n  getType(type) {\n    return this._registeredTypes[type];\n  }\n\n  applyType(type) {\n    const configType = this._registeredTypes[type];\n    if (!configType) {\n      console.warn('Unsupported source type: ' + type);\n      return;\n    }\n    const { textKey = type, icon = type, activity, onClick, activityParams = {} } = configType;\n\n    this.applyL10nKey('src-type', `${L10N_PREFIX}${textKey}`);\n    this.$.iconName = icon;\n    this.onclick = (e) => {\n      const showActivity = onClick ? onClick(e) : !!activity;\n      showActivity &&\n        this.set$({\n          '*currentActivityParams': activityParams,\n          '*currentActivity': activity,\n        });\n    };\n  }\n}\nSourceBtn.template = /* HTML */ `\n  <lr-icon set=\"@name: iconName\"></lr-icon>\n  <div class=\"txt\" l10n=\"src-type\"></div>\n`;\nSourceBtn.bindAttributes({\n  type: null,\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}